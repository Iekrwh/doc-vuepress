<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>MyCat 中间件 | Chiriri</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/doc-vuepress/favicon.ico">
    <meta name="description" content="Chiriridesu">
    
    <link rel="preload" href="/doc-vuepress/assets/css/0.styles.71c39aa4.css" as="style"><link rel="preload" href="/doc-vuepress/assets/js/app.b1672c91.js" as="script"><link rel="preload" href="/doc-vuepress/assets/js/2.3b3db5cf.js" as="script"><link rel="preload" href="/doc-vuepress/assets/js/137.458108cb.js" as="script"><link rel="prefetch" href="/doc-vuepress/assets/js/10.666dc73a.js"><link rel="prefetch" href="/doc-vuepress/assets/js/100.0a098c90.js"><link rel="prefetch" href="/doc-vuepress/assets/js/101.85f1d572.js"><link rel="prefetch" href="/doc-vuepress/assets/js/102.d541c1aa.js"><link rel="prefetch" href="/doc-vuepress/assets/js/103.ed02d10c.js"><link rel="prefetch" href="/doc-vuepress/assets/js/104.28020878.js"><link rel="prefetch" href="/doc-vuepress/assets/js/105.6ef08bb9.js"><link rel="prefetch" href="/doc-vuepress/assets/js/106.1c09e5ff.js"><link rel="prefetch" href="/doc-vuepress/assets/js/107.c0e5e795.js"><link rel="prefetch" href="/doc-vuepress/assets/js/108.c036de52.js"><link rel="prefetch" href="/doc-vuepress/assets/js/109.ddc805f4.js"><link rel="prefetch" href="/doc-vuepress/assets/js/11.85ab95e3.js"><link rel="prefetch" href="/doc-vuepress/assets/js/110.4ef712b9.js"><link rel="prefetch" href="/doc-vuepress/assets/js/111.94196968.js"><link rel="prefetch" href="/doc-vuepress/assets/js/112.8ed1fcfe.js"><link rel="prefetch" href="/doc-vuepress/assets/js/113.86298697.js"><link rel="prefetch" href="/doc-vuepress/assets/js/114.f89b8c54.js"><link rel="prefetch" href="/doc-vuepress/assets/js/115.c6b78bff.js"><link rel="prefetch" href="/doc-vuepress/assets/js/116.f359efb9.js"><link rel="prefetch" href="/doc-vuepress/assets/js/117.15693d60.js"><link rel="prefetch" href="/doc-vuepress/assets/js/118.1ec00915.js"><link rel="prefetch" href="/doc-vuepress/assets/js/119.7ebdba32.js"><link rel="prefetch" href="/doc-vuepress/assets/js/12.50b597d1.js"><link rel="prefetch" href="/doc-vuepress/assets/js/120.07c8cf5a.js"><link rel="prefetch" href="/doc-vuepress/assets/js/121.2c318447.js"><link rel="prefetch" href="/doc-vuepress/assets/js/122.61018ec9.js"><link rel="prefetch" href="/doc-vuepress/assets/js/123.94ecbe9b.js"><link rel="prefetch" href="/doc-vuepress/assets/js/124.8fb9f60c.js"><link rel="prefetch" href="/doc-vuepress/assets/js/125.4ad17dc1.js"><link rel="prefetch" href="/doc-vuepress/assets/js/126.0e87444a.js"><link rel="prefetch" href="/doc-vuepress/assets/js/127.39e9bf86.js"><link rel="prefetch" href="/doc-vuepress/assets/js/128.1d03d72b.js"><link rel="prefetch" href="/doc-vuepress/assets/js/129.15a76553.js"><link rel="prefetch" href="/doc-vuepress/assets/js/13.9a4f426d.js"><link rel="prefetch" href="/doc-vuepress/assets/js/130.c52db2c9.js"><link rel="prefetch" href="/doc-vuepress/assets/js/131.95779b52.js"><link rel="prefetch" href="/doc-vuepress/assets/js/132.c82522fd.js"><link rel="prefetch" href="/doc-vuepress/assets/js/133.f1617f43.js"><link rel="prefetch" href="/doc-vuepress/assets/js/134.65ab4498.js"><link rel="prefetch" href="/doc-vuepress/assets/js/135.9341bf11.js"><link rel="prefetch" href="/doc-vuepress/assets/js/136.9bd46a22.js"><link rel="prefetch" href="/doc-vuepress/assets/js/138.427ada35.js"><link rel="prefetch" href="/doc-vuepress/assets/js/139.238a6652.js"><link rel="prefetch" href="/doc-vuepress/assets/js/14.dfef0524.js"><link rel="prefetch" href="/doc-vuepress/assets/js/140.93334b90.js"><link rel="prefetch" href="/doc-vuepress/assets/js/141.9fbf7243.js"><link rel="prefetch" href="/doc-vuepress/assets/js/142.8b96485d.js"><link rel="prefetch" href="/doc-vuepress/assets/js/143.eacd1093.js"><link rel="prefetch" href="/doc-vuepress/assets/js/144.be8f7d11.js"><link rel="prefetch" href="/doc-vuepress/assets/js/145.59244fbe.js"><link rel="prefetch" href="/doc-vuepress/assets/js/146.d43ef659.js"><link rel="prefetch" href="/doc-vuepress/assets/js/147.c5340d60.js"><link rel="prefetch" href="/doc-vuepress/assets/js/148.3770594a.js"><link rel="prefetch" href="/doc-vuepress/assets/js/149.e9aecdd1.js"><link rel="prefetch" href="/doc-vuepress/assets/js/15.f6c1af5d.js"><link rel="prefetch" href="/doc-vuepress/assets/js/150.1b481898.js"><link rel="prefetch" href="/doc-vuepress/assets/js/151.48519686.js"><link rel="prefetch" href="/doc-vuepress/assets/js/152.4fe7b97a.js"><link rel="prefetch" href="/doc-vuepress/assets/js/153.7944f896.js"><link rel="prefetch" href="/doc-vuepress/assets/js/154.a5cd7a63.js"><link rel="prefetch" href="/doc-vuepress/assets/js/155.ea90d02b.js"><link rel="prefetch" href="/doc-vuepress/assets/js/156.e718da77.js"><link rel="prefetch" href="/doc-vuepress/assets/js/157.25464da8.js"><link rel="prefetch" href="/doc-vuepress/assets/js/158.4e943d8e.js"><link rel="prefetch" href="/doc-vuepress/assets/js/159.a556cdb0.js"><link rel="prefetch" href="/doc-vuepress/assets/js/16.02bd7e8e.js"><link rel="prefetch" href="/doc-vuepress/assets/js/160.b1360202.js"><link rel="prefetch" href="/doc-vuepress/assets/js/161.3a31aac1.js"><link rel="prefetch" href="/doc-vuepress/assets/js/162.7a9615ba.js"><link rel="prefetch" href="/doc-vuepress/assets/js/163.b1880a32.js"><link rel="prefetch" href="/doc-vuepress/assets/js/164.c4c1fd71.js"><link rel="prefetch" href="/doc-vuepress/assets/js/165.af1463a4.js"><link rel="prefetch" href="/doc-vuepress/assets/js/166.5f553d7f.js"><link rel="prefetch" href="/doc-vuepress/assets/js/167.199e3b3c.js"><link rel="prefetch" href="/doc-vuepress/assets/js/168.6314d015.js"><link rel="prefetch" href="/doc-vuepress/assets/js/169.f3eaf5f7.js"><link rel="prefetch" href="/doc-vuepress/assets/js/17.eab1776f.js"><link rel="prefetch" href="/doc-vuepress/assets/js/170.fcb27332.js"><link rel="prefetch" href="/doc-vuepress/assets/js/171.457da777.js"><link rel="prefetch" href="/doc-vuepress/assets/js/172.a76423eb.js"><link rel="prefetch" href="/doc-vuepress/assets/js/173.aa18ebef.js"><link rel="prefetch" href="/doc-vuepress/assets/js/174.c2c81390.js"><link rel="prefetch" href="/doc-vuepress/assets/js/175.f416c348.js"><link rel="prefetch" href="/doc-vuepress/assets/js/176.06e50096.js"><link rel="prefetch" href="/doc-vuepress/assets/js/177.3ef260a1.js"><link rel="prefetch" href="/doc-vuepress/assets/js/178.861998d9.js"><link rel="prefetch" href="/doc-vuepress/assets/js/179.06f9245a.js"><link rel="prefetch" href="/doc-vuepress/assets/js/18.c8bb5454.js"><link rel="prefetch" href="/doc-vuepress/assets/js/180.48cd52ef.js"><link rel="prefetch" href="/doc-vuepress/assets/js/181.5268edaa.js"><link rel="prefetch" href="/doc-vuepress/assets/js/182.df63ea49.js"><link rel="prefetch" href="/doc-vuepress/assets/js/183.21c31f4d.js"><link rel="prefetch" href="/doc-vuepress/assets/js/184.41753c99.js"><link rel="prefetch" href="/doc-vuepress/assets/js/185.4856832c.js"><link rel="prefetch" href="/doc-vuepress/assets/js/186.6990be7b.js"><link rel="prefetch" href="/doc-vuepress/assets/js/187.e7bc7992.js"><link rel="prefetch" href="/doc-vuepress/assets/js/188.172df96c.js"><link rel="prefetch" href="/doc-vuepress/assets/js/189.e682de79.js"><link rel="prefetch" href="/doc-vuepress/assets/js/19.e77f86e5.js"><link rel="prefetch" href="/doc-vuepress/assets/js/190.3afa2fbe.js"><link rel="prefetch" href="/doc-vuepress/assets/js/191.9a4273b5.js"><link rel="prefetch" href="/doc-vuepress/assets/js/192.6ebc3531.js"><link rel="prefetch" href="/doc-vuepress/assets/js/193.a37f4bc9.js"><link rel="prefetch" href="/doc-vuepress/assets/js/194.ce2b5c83.js"><link rel="prefetch" href="/doc-vuepress/assets/js/20.b0cd8e95.js"><link rel="prefetch" href="/doc-vuepress/assets/js/21.ddd86fe0.js"><link rel="prefetch" href="/doc-vuepress/assets/js/22.0ff354d0.js"><link rel="prefetch" href="/doc-vuepress/assets/js/23.947e95fd.js"><link rel="prefetch" href="/doc-vuepress/assets/js/24.c8ed0fbd.js"><link rel="prefetch" href="/doc-vuepress/assets/js/25.018a14b6.js"><link rel="prefetch" href="/doc-vuepress/assets/js/26.08ca217e.js"><link rel="prefetch" href="/doc-vuepress/assets/js/27.5a76b030.js"><link rel="prefetch" href="/doc-vuepress/assets/js/28.98dbc8f8.js"><link rel="prefetch" href="/doc-vuepress/assets/js/29.d4a43ec9.js"><link rel="prefetch" href="/doc-vuepress/assets/js/3.39abf8a9.js"><link rel="prefetch" href="/doc-vuepress/assets/js/30.54f40361.js"><link rel="prefetch" href="/doc-vuepress/assets/js/31.87ec1b2e.js"><link rel="prefetch" href="/doc-vuepress/assets/js/32.2018a1ae.js"><link rel="prefetch" href="/doc-vuepress/assets/js/33.b1051a51.js"><link rel="prefetch" href="/doc-vuepress/assets/js/34.d1550c3f.js"><link rel="prefetch" href="/doc-vuepress/assets/js/35.3a82e048.js"><link rel="prefetch" href="/doc-vuepress/assets/js/36.bc2b3255.js"><link rel="prefetch" href="/doc-vuepress/assets/js/37.a6f99457.js"><link rel="prefetch" href="/doc-vuepress/assets/js/38.a5858ebe.js"><link rel="prefetch" href="/doc-vuepress/assets/js/39.479e20dc.js"><link rel="prefetch" href="/doc-vuepress/assets/js/4.851bf8c4.js"><link rel="prefetch" href="/doc-vuepress/assets/js/40.868120a2.js"><link rel="prefetch" href="/doc-vuepress/assets/js/41.a6bf308a.js"><link rel="prefetch" href="/doc-vuepress/assets/js/42.c37e09e3.js"><link rel="prefetch" href="/doc-vuepress/assets/js/43.a8298eaf.js"><link rel="prefetch" href="/doc-vuepress/assets/js/44.0b08e0e3.js"><link rel="prefetch" href="/doc-vuepress/assets/js/45.3d363f61.js"><link rel="prefetch" href="/doc-vuepress/assets/js/46.ca15b330.js"><link rel="prefetch" href="/doc-vuepress/assets/js/47.ebe45cac.js"><link rel="prefetch" href="/doc-vuepress/assets/js/48.4ddbbdca.js"><link rel="prefetch" href="/doc-vuepress/assets/js/49.c6e02072.js"><link rel="prefetch" href="/doc-vuepress/assets/js/5.e09897f2.js"><link rel="prefetch" href="/doc-vuepress/assets/js/50.9ddccbc1.js"><link rel="prefetch" href="/doc-vuepress/assets/js/51.26d914ea.js"><link rel="prefetch" href="/doc-vuepress/assets/js/52.3b443edc.js"><link rel="prefetch" href="/doc-vuepress/assets/js/53.340acb97.js"><link rel="prefetch" href="/doc-vuepress/assets/js/54.c5a4684d.js"><link rel="prefetch" href="/doc-vuepress/assets/js/55.db2cb7c0.js"><link rel="prefetch" href="/doc-vuepress/assets/js/56.dc616c9f.js"><link rel="prefetch" href="/doc-vuepress/assets/js/57.4613a350.js"><link rel="prefetch" href="/doc-vuepress/assets/js/58.b8ae2182.js"><link rel="prefetch" href="/doc-vuepress/assets/js/59.688c3790.js"><link rel="prefetch" href="/doc-vuepress/assets/js/6.7862f44a.js"><link rel="prefetch" href="/doc-vuepress/assets/js/60.aa9d0d9c.js"><link rel="prefetch" href="/doc-vuepress/assets/js/61.c6709445.js"><link rel="prefetch" href="/doc-vuepress/assets/js/62.549ca843.js"><link rel="prefetch" href="/doc-vuepress/assets/js/63.2772d45c.js"><link rel="prefetch" href="/doc-vuepress/assets/js/64.2e80eee1.js"><link rel="prefetch" href="/doc-vuepress/assets/js/65.6189a1f4.js"><link rel="prefetch" href="/doc-vuepress/assets/js/66.6bd6476d.js"><link rel="prefetch" href="/doc-vuepress/assets/js/67.bf6bb46a.js"><link rel="prefetch" href="/doc-vuepress/assets/js/68.baf5d40e.js"><link rel="prefetch" href="/doc-vuepress/assets/js/69.5080d15d.js"><link rel="prefetch" href="/doc-vuepress/assets/js/7.703c8b54.js"><link rel="prefetch" href="/doc-vuepress/assets/js/70.43de9e33.js"><link rel="prefetch" href="/doc-vuepress/assets/js/71.c3d60ec1.js"><link rel="prefetch" href="/doc-vuepress/assets/js/72.c2411038.js"><link rel="prefetch" href="/doc-vuepress/assets/js/73.0208f06a.js"><link rel="prefetch" href="/doc-vuepress/assets/js/74.4de1bf4e.js"><link rel="prefetch" href="/doc-vuepress/assets/js/75.05be534e.js"><link rel="prefetch" href="/doc-vuepress/assets/js/76.884b8dd0.js"><link rel="prefetch" href="/doc-vuepress/assets/js/77.c7f53284.js"><link rel="prefetch" href="/doc-vuepress/assets/js/78.22d394a0.js"><link rel="prefetch" href="/doc-vuepress/assets/js/79.f409a028.js"><link rel="prefetch" href="/doc-vuepress/assets/js/8.6471eaab.js"><link rel="prefetch" href="/doc-vuepress/assets/js/80.86c788b5.js"><link rel="prefetch" href="/doc-vuepress/assets/js/81.9c1eebb5.js"><link rel="prefetch" href="/doc-vuepress/assets/js/82.945b44d7.js"><link rel="prefetch" href="/doc-vuepress/assets/js/83.f6f98840.js"><link rel="prefetch" href="/doc-vuepress/assets/js/84.2d4a2706.js"><link rel="prefetch" href="/doc-vuepress/assets/js/85.182716e8.js"><link rel="prefetch" href="/doc-vuepress/assets/js/86.41e07e9a.js"><link rel="prefetch" href="/doc-vuepress/assets/js/87.0702b2f5.js"><link rel="prefetch" href="/doc-vuepress/assets/js/88.e5c83560.js"><link rel="prefetch" href="/doc-vuepress/assets/js/89.145c37c8.js"><link rel="prefetch" href="/doc-vuepress/assets/js/9.9fc18b40.js"><link rel="prefetch" href="/doc-vuepress/assets/js/90.73f40e19.js"><link rel="prefetch" href="/doc-vuepress/assets/js/91.83021d9e.js"><link rel="prefetch" href="/doc-vuepress/assets/js/92.ac94328c.js"><link rel="prefetch" href="/doc-vuepress/assets/js/93.e9b56653.js"><link rel="prefetch" href="/doc-vuepress/assets/js/94.88abc35f.js"><link rel="prefetch" href="/doc-vuepress/assets/js/95.9f3cd06e.js"><link rel="prefetch" href="/doc-vuepress/assets/js/96.01da7e7d.js"><link rel="prefetch" href="/doc-vuepress/assets/js/97.fd1f8775.js"><link rel="prefetch" href="/doc-vuepress/assets/js/98.a9e9ea40.js"><link rel="prefetch" href="/doc-vuepress/assets/js/99.a32d5b85.js">
    <link rel="stylesheet" href="/doc-vuepress/assets/css/0.styles.71c39aa4.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/doc-vuepress/" class="home-link router-link-active"><!----> <span class="site-name">Chiriri</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/doc-vuepress/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><span class="title">后端</span> <span class="arrow down"></span></button> <button type="button" aria-label="后端" class="mobile-dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/doc-vuepress/JavaSE/" class="nav-link">
  JavaSE
</a></li><li class="dropdown-item"><!----> <a href="/doc-vuepress/JavaEE/" class="nav-link">
  JavaEE
</a></li><li class="dropdown-item"><!----> <a href="/doc-vuepress/Linux/" class="nav-link">
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/doc-vuepress/SQL/" class="nav-link router-link-active">
  SQL
</a></li><li class="dropdown-item"><!----> <a href="/doc-vuepress/机器学习/" class="nav-link">
  机器学习
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="大数据" class="dropdown-title"><span class="title">大数据</span> <span class="arrow down"></span></button> <button type="button" aria-label="大数据" class="mobile-dropdown-title"><span class="title">大数据</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/doc-vuepress/Hadoop/" class="nav-link">
  Hadoop
</a></li><li class="dropdown-item"><!----> <a href="/doc-vuepress/Hive/" class="nav-link">
  Hive
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/doc-vuepress/前端/" class="nav-link">
  前端
</a></li><li class="dropdown-item"><!----> <a href="/doc-vuepress/Vue/" class="nav-link">
  Vue
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/doc-vuepress/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><span class="title">后端</span> <span class="arrow down"></span></button> <button type="button" aria-label="后端" class="mobile-dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/doc-vuepress/JavaSE/" class="nav-link">
  JavaSE
</a></li><li class="dropdown-item"><!----> <a href="/doc-vuepress/JavaEE/" class="nav-link">
  JavaEE
</a></li><li class="dropdown-item"><!----> <a href="/doc-vuepress/Linux/" class="nav-link">
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/doc-vuepress/SQL/" class="nav-link router-link-active">
  SQL
</a></li><li class="dropdown-item"><!----> <a href="/doc-vuepress/机器学习/" class="nav-link">
  机器学习
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="大数据" class="dropdown-title"><span class="title">大数据</span> <span class="arrow down"></span></button> <button type="button" aria-label="大数据" class="mobile-dropdown-title"><span class="title">大数据</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/doc-vuepress/Hadoop/" class="nav-link">
  Hadoop
</a></li><li class="dropdown-item"><!----> <a href="/doc-vuepress/Hive/" class="nav-link">
  Hive
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/doc-vuepress/前端/" class="nav-link">
  前端
</a></li><li class="dropdown-item"><!----> <a href="/doc-vuepress/Vue/" class="nav-link">
  Vue
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/doc-vuepress/SQL/数据库相关概念.html" class="sidebar-link">数据库相关概念</a></li><li><a href="/doc-vuepress/SQL/数据库存储数据的特点.html" class="sidebar-link">数据库存储数据的特点</a></li><li><a href="/doc-vuepress/SQL/MySQL服务端.html" class="sidebar-link">MySQL服务端</a></li><li><a href="/doc-vuepress/SQL/环境变量.html" class="sidebar-link">环境变量</a></li><li><a href="/doc-vuepress/SQL/命令符指令.html" class="sidebar-link">命令符指令</a></li><li><a href="/doc-vuepress/SQL/SQL语句.html" class="sidebar-link">SQL语句</a></li><li><a href="/doc-vuepress/SQL/数据库.html" class="sidebar-link">数据库</a></li><li><a href="/doc-vuepress/SQL/表.html" class="sidebar-link">表</a></li><li><a href="/doc-vuepress/SQL/约束.html" class="sidebar-link">约束</a></li><li><a href="/doc-vuepress/SQL/多表操作.html" class="sidebar-link">多表操作</a></li><li><a href="/doc-vuepress/SQL/视图.html" class="sidebar-link">视图</a></li><li><a href="/doc-vuepress/SQL/备份.html" class="sidebar-link">备份</a></li><li><a href="/doc-vuepress/SQL/MySQL 存储过程和函数.html" class="sidebar-link">MySQL 存储过程和函数</a></li><li><a href="/doc-vuepress/SQL/触发器.html" class="sidebar-link">触发器</a></li><li><a href="/doc-vuepress/SQL/事务.html" class="sidebar-link">事务</a></li><li><a href="/doc-vuepress/SQL/存储引擎.html" class="sidebar-link">存储引擎</a></li><li><a href="/doc-vuepress/SQL/索引.html" class="sidebar-link">索引</a></li><li><a href="/doc-vuepress/SQL/锁.html" class="sidebar-link">锁</a></li><li><a href="/doc-vuepress/SQL/MyCat 中间件.html" class="active sidebar-link">MyCat 中间件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/doc-vuepress/SQL/MyCat 中间件.html#mysql忘记密码" class="sidebar-link">mysql忘记密码</a></li><li class="sidebar-sub-header"><a href="/doc-vuepress/SQL/MyCat 中间件.html#安装" class="sidebar-link">安装</a></li><li class="sidebar-sub-header"><a href="/doc-vuepress/SQL/MyCat 中间件.html#克隆" class="sidebar-link">克隆</a></li><li class="sidebar-sub-header"><a href="/doc-vuepress/SQL/MyCat 中间件.html#主重复制" class="sidebar-link">主重复制</a></li><li class="sidebar-sub-header"><a href="/doc-vuepress/SQL/MyCat 中间件.html#读写分离" class="sidebar-link">读写分离</a></li><li class="sidebar-sub-header"><a href="/doc-vuepress/SQL/MyCat 中间件.html#分库分表" class="sidebar-link">分库分表</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/doc-vuepress/SQL/MyCat 中间件.html#水平拆分" class="sidebar-link">水平拆分</a></li><li class="sidebar-sub-header"><a href="/doc-vuepress/SQL/MyCat 中间件.html#垂直拆分" class="sidebar-link">垂直拆分</a></li></ul></li></ul></li><li><a href="/doc-vuepress/SQL/Nosql.html" class="sidebar-link">Nosql</a></li><li><a href="/doc-vuepress/SQL/Redis.html" class="sidebar-link">Redis</a></li><li><a href="/doc-vuepress/SQL/Redis高级.html" class="sidebar-link">Redis高级</a></li><li><a href="/doc-vuepress/SQL/MongoDB.html" class="sidebar-link">MongoDB</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="mycat-中间件"><a href="#mycat-中间件" class="header-anchor">#</a> MyCat 中间件</h1> <p>MyCat 是一款 数据集群软件 ,支持MySQL 和常用的关系型数据库</p> <h2 id="mysql忘记密码"><a href="#mysql忘记密码" class="header-anchor">#</a> mysql忘记密码</h2> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">vi</span> /etc/my.cnf
<span class="token comment">#在[mysqld]下添加编码配置</span>
skip-grant-tables  <span class="token comment">#无需密码进入mysql</span>


mysql -uroot -p <span class="token comment">#直接回车进入</span>

<span class="token comment">#修改密码</span>
use mysql<span class="token punctuation">;</span>
update user <span class="token builtin class-name">set</span> <span class="token assign-left variable">authentication_string</span><span class="token operator">=</span>password<span class="token punctuation">(</span><span class="token string">'123456'</span><span class="token punctuation">)</span> where <span class="token assign-left variable">user</span><span class="token operator">=</span><span class="token string">'root'</span><span class="token punctuation">;</span>
<span class="token comment">#刷新权限</span>
flush privileges<span class="token punctuation">;</span>
<span class="token builtin class-name">exit</span><span class="token punctuation">;</span>
<span class="token comment">#删除之前的无密码</span>
<span class="token function">vi</span> /etc/my.cnf

systemctl restart mysqld <span class="token comment">#重启</span>
</code></pre></div><h2 id="安装"><a href="#安装" class="header-anchor">#</a> 安装</h2> <p>mysql</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">wget</span> -i -c http://dev.mysql.com/get/mysql57-community-release-el7-10.noarch.rpm
yum -y <span class="token function">install</span> mysql57-community-release-el7-10.noarch.rpm
yum -y <span class="token function">install</span> mysql-community-server
systemctl start  mysqld.service
<span class="token function">grep</span> <span class="token string">&quot;password&quot;</span> /var/log/mysqld.log
 
mysql -uroot -p

<span class="token comment">#修改密码</span>
ALTER <span class="token environment constant">USER</span> <span class="token string">'root'</span>@<span class="token string">'localhost'</span> IDENTIFIED BY <span class="token string">'new password'</span><span class="token punctuation">;</span>
<span class="token comment">#关闭密码强度检测</span>
grant all privileges on *.* to <span class="token string">'root'</span>@<span class="token string">'%'</span> identified by <span class="token string">'password'</span> with grant option<span class="token punctuation">;</span>
flush privileges<span class="token punctuation">;</span> 
<span class="token comment">#退出</span>
<span class="token builtin class-name">exit</span>
<span class="token comment">#防火墙</span>
firewall-cmd --zone<span class="token operator">=</span>public --add-port<span class="token operator">=</span><span class="token number">3306</span>/tcp --permanent
firewall-cmd --reload  

<span class="token comment">#配置默认编码为UTF-8 修改/etc/my.cnf配置文件，在[mysqld]下添加编码配置，如下所示</span>
<span class="token function">vi</span> /etc/my.cnf
<span class="token comment">#在[mysqld]下添加</span>

<span class="token assign-left variable">character_set_server</span><span class="token operator">=</span>utf8
collation-server<span class="token operator">=</span>utf8_general_ci
<span class="token assign-left variable">init_connect</span><span class="token operator">=</span><span class="token string">'SET NAMES utf8'</span>

systemctl restart mysqld

<span class="token comment"># 开机启动</span>
systemctl <span class="token builtin class-name">enable</span> mysqld
systemctl daemon-reload

<span class="token comment">#用户名为root 密码为A37</span>
</code></pre></div><p>mycat</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment">#上传mycat到linux上</span>
<span class="token function">tar</span> -xvf Mycat-server-1.6.7.6-release-20210730131311-linux.tar.gz 

<span class="token comment"># 编辑环境变量</span>
<span class="token function">vi</span> /etc/profile

<span class="token comment">#添加以下内容</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">MYCAT_HOME</span><span class="token operator">=</span>/root/mycat

<span class="token builtin class-name">source</span> /etc/profile

<span class="token builtin class-name">cd</span> /root/mycat/bin
./mycat start

firewall-cmd --zone<span class="token operator">=</span>public --add-port<span class="token operator">=</span><span class="token number">8066</span>/tcp --permanent
firewall-cmd --reload  

<span class="token comment">#用户root 密码123456 端口8066</span>
</code></pre></div><h2 id="克隆"><a href="#克隆" class="header-anchor">#</a> 克隆</h2> <p>克隆重新生成mac地址</p> <p>并修改mysql的uuid 随机改一下</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">vi</span> /var/lib/mysql/auto.cnf
</code></pre></div><h2 id="主重复制"><a href="#主重复制" class="header-anchor">#</a> 主重复制</h2> <p>MyCat 的读写分离 需要用到主从复制  从表会根据主表进行同步</p> <p>我们在写数据时 写入主表 而读取从从表中读取</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment">#在主服务器上</span>
<span class="token function">vi</span> /etc/my.cnf

<span class="token comment">#在[mysqld]加上 log-bin 开启主从复制 server-id 主从服务器的唯一标识</span>
log-bin<span class="token operator">=</span>mysql-bin
server-id<span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">innodb_flush_log_at_trx_commit</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">sync_binlog</span><span class="token operator">=</span><span class="token number">1</span>

<span class="token function">service</span> mysqld restart

mysql -uroot -p

<span class="token comment"># 需要 file和position的值 配置从服务器用</span>
show master status<span class="token punctuation">;</span>

</code></pre></div><div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment">#在从服务器上</span>
<span class="token function">vi</span> /etc/my.cnf

<span class="token comment">#在[mysqld]加上</span>
server-id<span class="token operator">=</span><span class="token number">2</span>

mysql -uroot -p

use mysql<span class="token punctuation">;</span>
drop table slave_master_info<span class="token punctuation">;</span>
drop table slave_relat_log_info<span class="token punctuation">;</span>
drop table slave_worker_info<span class="token punctuation">;</span>
drop table innodb_index_stats<span class="token punctuation">;</span>
drop table innodb_table_stats<span class="token punctuation">;</span>
sorce /usr/share/mysql/mysql_system_tables.sql<span class="token punctuation">;</span>

serveice mysqld restart

mysql -uroot -p

change master to <span class="token assign-left variable">master_host</span><span class="token operator">=</span><span class="token string">'主服务器ip'</span>,master_port<span class="token operator">=</span><span class="token number">3306</span>,master_user<span class="token operator">=</span><span class="token string">'root'</span>,master_password<span class="token operator">=</span><span class="token string">'password'</span>,master_log_file<span class="token operator">=</span><span class="token string">'刚刚在主服务器查到的值'</span>,master_log_pos<span class="token operator">=</span>同样也是之前查到的<span class="token punctuation">;</span>

<span class="token comment"># 开启从节点</span>
start slave<span class="token punctuation">;</span>

<span class="token comment"># 查询结果 Slave_IO_Runing和Slave_SQL_Running都为yes才成功</span>
show slave status<span class="token punctuation">\</span>G<span class="token punctuation">;</span>
</code></pre></div><h2 id="读写分离"><a href="#读写分离" class="header-anchor">#</a> 读写分离</h2> <p>需要先配置主从复制 写操作只写主服务器  而读取是从从服务器中数据</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 修改server.xml</span>
<span class="token function">vi</span> /root/mycat/conf/server.xml
</code></pre></div><div class="language-xml extra-class"><pre class="language-xml"><code>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>user</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span> <span class="token attr-name">defaultAccount</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          				  <span class="token comment">&lt;!-- 密码 --&gt;</span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>123456<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
         			   <span class="token comment">&lt;!-- 库名 --&gt;</span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>schemas<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>TESTDB<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>defaultSchema<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>TESTDB<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>user</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 修改schema.xml</span>
<span class="token function">vi</span> /root/mycat/conf/schema.xml
</code></pre></div><div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!-- 建议百度找配置文件这个不太准确 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mycat:</span>schema</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>mycat</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://io.mycat/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
     <span class="token comment">&lt;!-- name为主服务器 server文件的虚拟库名与name必须一致   --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>schema</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>TESTDB<span class="token punctuation">&quot;</span></span> <span class="token attr-name">checkSQLschema</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token attr-name">sqlMaxLimit</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>100<span class="token punctuation">&quot;</span></span> <span class="token attr-name">randomDataNode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dn1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>customer<span class="token punctuation">&quot;</span></span> <span class="token attr-name">primaryKey</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">dataNode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dn1,dn2<span class="token punctuation">&quot;</span></span> <span class="token attr-name">rule</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sharding-by-intfile<span class="token punctuation">&quot;</span></span> <span class="token attr-name">autoIncrement</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token attr-name">fetchStoreNodeByJdbc</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>childTable</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>customer_addr<span class="token punctuation">&quot;</span></span> <span class="token attr-name">primaryKey</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">joinKey</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>customer_id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parentKey</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>childTable</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>schema</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- name必须与datenode一致  database为真实的库名  --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dataNode</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dn1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">dataHost</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>localhost1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">database</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>db1<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dataNode</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dn2<span class="token punctuation">&quot;</span></span> <span class="token attr-name">dataHost</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>localhost1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">database</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>db2<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dataNode</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dn3<span class="token punctuation">&quot;</span></span> <span class="token attr-name">dataHost</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>localhost1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">database</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>db3<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dataHost</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>localhost1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">maxCon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1000<span class="token punctuation">&quot;</span></span> <span class="token attr-name">minCon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>10<span class="token punctuation">&quot;</span></span> <span class="token attr-name">balance</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span>
			  <span class="token attr-name">writeType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">dbType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mysql<span class="token punctuation">&quot;</span></span> <span class="token attr-name">dbDriver</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbc<span class="token punctuation">&quot;</span></span> <span class="token attr-name">switchType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span>  <span class="token attr-name">slaveThreshold</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>100<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>heartbeat</span><span class="token punctuation">&gt;</span></span>select user()<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>heartbeat</span><span class="token punctuation">&gt;</span></span>
		<span class="token comment">&lt;!-- 主服务器 host自定义  url为写的数据的地址+端口  user passwd --&gt;</span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>writeHost</span> <span class="token attr-name">host</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hostM1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">url</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbc:mysql://localhost:3306<span class="token punctuation">&quot;</span></span> <span class="token attr-name">user</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span>
				   <span class="token attr-name">password</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!-- 从服务器 负责读 --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>readHost</span> <span class="token attr-name">host</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hostS1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">url</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>从服务器+端口<span class="token punctuation">&quot;</span></span> <span class="token attr-name">user</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">password</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>writeHost</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dataHost</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">mycat:</span>schema</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 重启 mycat</span>
./mycat restart
</code></pre></div><p>使用时连接mycat的地址使用即可</p> <h2 id="分库分表"><a href="#分库分表" class="header-anchor">#</a> 分库分表</h2> <p>将庞大数据量拆分为不同的数据库和数据表进行存储</p> <h3 id="水平拆分"><a href="#水平拆分" class="header-anchor">#</a> 水平拆分</h3> <p>根据表的数据逻辑关系,将同一表中的数据按某种条件,拆分到多台服务器上,也叫横向拆分</p> <ul><li><p>修改主服务器中 server.xml     vi /root/mycat/conf/server.xml</p> <ul><li><div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!-- 添加property 配置主键方式 0为本地文件方式 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sequnceHandlerType<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ul></li> <li><p>修改主服务器的  sequence_conf.properties    vi /root/mycat/conf/sequence_conf.properties</p> <ul><li><div class="language-properties extra-class"><pre class="language-properties"><code><span class="token attr-name">GLOBAL.HISIDS</span><span class="token punctuation">=</span>     <span class="token attr-value">#可以自定义关键字</span>
<span class="token attr-name">GLOBAL.MINID</span><span class="token punctuation">=</span><span class="token attr-value">10001   #最小值</span>
<span class="token attr-name">GLOBAL.MAXID</span><span class="token punctuation">=</span><span class="token attr-value">20000   #最大值</span>
</code></pre></div></li></ul></li> <li><p>修改schema.xml      vi /root/mycat/conf/schema.xml</p> <ul><li><div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mycat:</span>schema</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>mycat</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://io.mycat/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>schema</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>TESTDB<span class="token punctuation">&quot;</span></span> <span class="token attr-name">checkSQLschema</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span> <span class="token attr-name">sqlMaxLimit</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>100<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>customer<span class="token punctuation">&quot;</span></span> <span class="token attr-name">primaryKey</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">dataNode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dn1,dn2,dn3<span class="token punctuation">&quot;</span></span> <span class="token attr-name">rule</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mod-long<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>schema</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- name必须与datenode一致  database为真实的库名  --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dataNode</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dn1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">dataHost</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>localhost1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">database</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>db1<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dataNode</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dn2<span class="token punctuation">&quot;</span></span> <span class="token attr-name">dataHost</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>localhost1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">database</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>db2<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dataNode</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dn3<span class="token punctuation">&quot;</span></span> <span class="token attr-name">dataHost</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>localhost1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">database</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>db3<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dataHost</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>localhost1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">maxCon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1000<span class="token punctuation">&quot;</span></span> <span class="token attr-name">minCon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>10<span class="token punctuation">&quot;</span></span> <span class="token attr-name">balance</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span>
			  <span class="token attr-name">writeType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">dbType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mysql<span class="token punctuation">&quot;</span></span> <span class="token attr-name">dbDriver</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>native<span class="token punctuation">&quot;</span></span> <span class="token attr-name">switchType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span>  <span class="token attr-name">slaveThreshold</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>100<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>heartbeat</span><span class="token punctuation">&gt;</span></span>select user()<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>heartbeat</span><span class="token punctuation">&gt;</span></span>
		<span class="token comment">&lt;!-- 主服务器 host自定义  url为写的数据的地址+端口  user passwd --&gt;</span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>writeHost</span> <span class="token attr-name">host</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hostM1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">url</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>localhost:3306<span class="token punctuation">&quot;</span></span> <span class="token attr-name">user</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span>
				   <span class="token attr-name">password</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!-- 从服务器 负责读 --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>readHost</span> <span class="token attr-name">host</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hostS1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">url</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>从服务器+端口<span class="token punctuation">&quot;</span></span> <span class="token attr-name">user</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">password</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>writeHost</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dataHost</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">mycat:</span>schema</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ul></li> <li><p>修改 rule.xml vi /root/mycat/conf/rule.xml</p> <ul><li><div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>function</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>mod-log<span class="token punctuation">'</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>io.mycat.route.function.PartitionBymod<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>count<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>function</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ul></li></ul> <p>插入数据列名必须完整   如果是自增键 则需要用 NEXT VALUE FOR MYCATSEQ_GLOBAL  不能用null</p> <p>以上配置用的是根据主键取模方式拆分</p> <h3 id="垂直拆分"><a href="#垂直拆分" class="header-anchor">#</a> 垂直拆分</h3> <p>根据业务的维度,将不同的表切分到不同数据库上,也叫纵向拆分</p> <ul><li><p>修改schema.xml      vi /root/mycat/conf/schema.xml</p> <ul><li><div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mycat:</span>schema</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>mycat</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://io.mycat/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>schema</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>TESTDB<span class="token punctuation">&quot;</span></span> <span class="token attr-name">checkSQLschema</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span> <span class="token attr-name">sqlMaxLimit</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>100<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dog<span class="token punctuation">&quot;</span></span> <span class="token attr-name">primaryKey</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">autoIncrement</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>true<span class="token punctuation">'</span></span> <span class="token attr-name">dataNode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>dn4<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cat<span class="token punctuation">&quot;</span></span> <span class="token attr-name">primaryKey</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">autoIncrement</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>true<span class="token punctuation">'</span></span> <span class="token attr-name">dataNode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>dn5<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>schema</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- name必须与datenode一致  database为真实的库名  --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dataNode</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dn4<span class="token punctuation">&quot;</span></span> <span class="token attr-name">dataHost</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>localhost1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">database</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>db1<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dataNode</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dn5<span class="token punctuation">&quot;</span></span> <span class="token attr-name">dataHost</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>localhost1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">database</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>db2<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dataHost</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>localhost1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">maxCon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1000<span class="token punctuation">&quot;</span></span> <span class="token attr-name">minCon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>10<span class="token punctuation">&quot;</span></span> <span class="token attr-name">balance</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span>
			  <span class="token attr-name">writeType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">dbType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mysql<span class="token punctuation">&quot;</span></span> <span class="token attr-name">dbDriver</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>native<span class="token punctuation">&quot;</span></span> <span class="token attr-name">switchType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span>  <span class="token attr-name">slaveThreshold</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>100<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>heartbeat</span><span class="token punctuation">&gt;</span></span>select user()<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>heartbeat</span><span class="token punctuation">&gt;</span></span>
		<span class="token comment">&lt;!-- 主服务器 host自定义  url为写的数据的地址+端口  user passwd --&gt;</span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>writeHost</span> <span class="token attr-name">host</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hostM1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">url</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>localhost:3306<span class="token punctuation">&quot;</span></span> <span class="token attr-name">user</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span>
				   <span class="token attr-name">password</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!-- 从服务器 负责读 --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>readHost</span> <span class="token attr-name">host</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hostS1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">url</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>从服务器+端口<span class="token punctuation">&quot;</span></span> <span class="token attr-name">user</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">password</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>writeHost</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dataHost</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">mycat:</span>schema</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>根据 表名 区分库 如dog 存放在db1中  cat存放在db2中</p></li></ul></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/doc-vuepress/SQL/锁.html" class="prev">
        锁
      </a></span> <span class="next"><a href="/doc-vuepress/SQL/Nosql.html">
        Nosql
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/doc-vuepress/assets/js/app.b1672c91.js" defer></script><script src="/doc-vuepress/assets/js/2.3b3db5cf.js" defer></script><script src="/doc-vuepress/assets/js/137.458108cb.js" defer></script>
  </body>
</html>
