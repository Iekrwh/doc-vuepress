(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{409:function(t,s,a){"use strict";a.r(s);var n=a(46),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"elasticsearch"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#elasticsearch"}},[t._v("#")]),t._v(" ElasticSearch")]),t._v(" "),a("p",[t._v("ElasticSearch是基于 Lucene的搜索服务器 是一个分布式 高扩展 高实时的搜索与数据分析引擎")]),t._v(" "),a("p",[t._v("基于RESTful web接口")]),t._v(" "),a("p",[t._v("ElasticSearch是用java开发 并作为apache的开源项目")]),t._v(" "),a("p",[t._v("https://www.elastic.co/cn/")]),t._v(" "),a("p",[t._v("一般用于 海量数据的查询 日志数据分析 实时数据分析")]),t._v(" "),a("h2",{attrs:{id:"倒排索引"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#倒排索引"}},[t._v("#")]),t._v(" 倒排索引")]),t._v(" "),a("p",[t._v("将各个文档中内容.进行分词 形成词条 记录词条和数据的唯一标识(id)的对应关系 形成的产物")]),t._v(" "),a("h2",{attrs:{id:"elasticsearch搜索和传统数据库查询的区别"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#elasticsearch搜索和传统数据库查询的区别"}},[t._v("#")]),t._v(" ElasticSearch搜索和传统数据库查询的区别")]),t._v(" "),a("ol",[a("li",[t._v("传统关系型数据 使用模糊查询 左边有通配符 不会走索引 会全表扫描 性能低")]),t._v(" "),a("li",[t._v("只能以一个关键字作为查询条件  而ElasticSearch会把一个关键字拆分为多个词 进行查询")]),t._v(" "),a("li",[t._v("ElasticSearch 以关键字 生成的倒排索引 词条会排序 形成一颗树形结构 提升词条的查询速度")]),t._v(" "),a("li",[t._v("Mysql有事务性 而ElasticSearch 没有事务性 所以删了的数据是无法恢复的")]),t._v(" "),a("li",[t._v("ElasticSearch 没有物理外键这个特性 如果数据的一致性要求比较高 不建议使用")]),t._v(" "),a("li",[t._v("ElasticSearch和Mysql 分工不同 Mysql负责存储数据 ElasticSearch负责搜索数据")])]),t._v(" "),a("h2",{attrs:{id:"安装elasticsearch"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装elasticsearch"}},[t._v("#")]),t._v(" 安装ElasticSearch")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("tar")]),t._v(" -zxvf elasticsearch-7.15.0-linux-x86_64.tar.gz -C /opt\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#编辑配置")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" /opt/elasticsearch-7.15.0/config/elasticsearch.yml\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#追加以下内容")]),t._v("\ncluster.name: my-application\nnode.name: node-1\nnetwork.host: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0")]),t._v(".0.0\nhttp.port: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("9200")]),t._v("\ncluster.initial_master_nodes: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"node-1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#出于安全问题ElasticSearch不允许root用户直接运行")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useradd")]),t._v(" iekr\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("passwd")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("123456")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#授权")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("chown")]),t._v(" -R iekr:iekr /opt/elasticsearch-7.15.0/\n")])])]),a("p",[t._v("新建的用户最大创建文件和最大虚拟内存太小 需要修改配置文件")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#修改最大创建文件数")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" /etc/security/limits.conf\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#追加内容")]),t._v("\niekr soft nofile "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("65536")]),t._v("\niekr hard nofile "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("65536")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" /etc/security/limits.d/20-nproc.conf\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#追加内容")]),t._v("\niekr soft nofile "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("65536")]),t._v("\niekr hard nofile "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("65536")]),t._v("\n* hard nproc "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4096")]),t._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#修改虚拟内容大小")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" /etc/sysctl.conf \n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#追加内容")]),t._v("\nvm.max_map_count"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("655360")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#重载")]),t._v("\nsysctl -p\n\nfirewall-cmd --zone"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("public --add-port"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("9200")]),t._v("/tcp --permanent\n")])])]),a("p",[t._v("启动")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("su")]),t._v(" iekr\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /opt/elasticsearch-7.15.0/bin/\n./elasticsearch -d  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#-d后台运行")]),t._v("\n")])])]),a("p",[t._v("访问 http://192.168.130.124:9200/ 出现json字符串则启动成功")]),t._v(" "),a("h3",{attrs:{id:"安装辅助工具kibana"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装辅助工具kibana"}},[t._v("#")]),t._v(" 安装辅助工具Kibana")]),t._v(" "),a("p",[t._v("https://www.elastic.co/cn/kibana/")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("tar")]),t._v(" -zxvf kibana-7.15.0-linux-x86_64.tar.gz -C /opt\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#配置")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" /opt/kibana-7.15.0-linux-x86_64/config/kibana.yml\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#追加内容")]),t._v("\nserver.port: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5601")]),t._v("\nserver.host: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0.0.0.0"')]),t._v("\nserver.name: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"your-hostname"')]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#自定义名称")]),t._v("\nelasticsearch.hosts: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://localhost:9200"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nelasticsearch.requestTimeout: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("30000")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#连接ES超时时间")]),t._v("\ni18n.locale: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"zh-CN"')]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#设置为中文")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#授权")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("chown")]),t._v(" -R iekr:iekr /opt/kibana-7.15.0-linux-x86_64/\nfirewall-cmd --zone"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("public --add-port"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5601")]),t._v("/tcp --permanent\n")])])]),a("p",[t._v("启动")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("su")]),t._v(" iekr\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /opt/kibana-7.15.0-linux-x86_64/bin/\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("nohup")]),t._v(" ./kibana "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#后台运行  前台./kibana")]),t._v("\n")])])]),a("h2",{attrs:{id:"elasticsearch-核心概念"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#elasticsearch-核心概念"}},[t._v("#")]),t._v(" ElasticSearch 核心概念")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("索引(index)\nElasticSearch存储数据的地方 可以理解为关系型数据库中的数据库概念")])]),t._v(" "),a("li",[a("p",[t._v("映射(mapping)")]),t._v(" "),a("p",[t._v("mapping定义了每个字段的类型 字段所使用的分词器等 相定义关系型数据库中的表结构")])]),t._v(" "),a("li",[a("p",[t._v("文档(document)\nElasticSearch中的最小数据单元 以json格式显示 一个document相当于 关系型数据库的一行数据")])]),t._v(" "),a("li",[a("p",[t._v("倒排索引\n一个倒排索引由文档中所有不重复此的列表构成 对应其中每个词 对应一个包含它的文档id列表")])]),t._v(" "),a("li",[a("p",[t._v("类型(type)")]),t._v(" "),a("p",[t._v("一种type就像一类表 如用户表 角色表等\n在ElasticSearch7.x type默认为_doc")]),t._v(" "),a("p",[t._v("5.x中一个index可以有多种type")]),t._v(" "),a("p",[t._v("6.x中一个index只能有一种type")])])]),t._v(" "),a("h2",{attrs:{id:"操作elasticsearch"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#操作elasticsearch"}},[t._v("#")]),t._v(" 操作ElasticSearch")]),t._v(" "),a("h3",{attrs:{id:"restful风格"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#restful风格"}},[t._v("#")]),t._v(" RESTful风格")]),t._v(" "),a("p",[t._v("REST 表述性状态转移 是一组架构约束条件和原则 满足这些约束条件和原则的应用程序或设计就是RESTful 是与只能怪定义接口的规范")]),t._v(" "),a("h3",{attrs:{id:"操作索引"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#操作索引"}},[t._v("#")]),t._v(" 操作索引")]),t._v(" "),a("p",[t._v("以下操作使用postman工具发送请求")]),t._v(" "),a("h4",{attrs:{id:"添加索引"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#添加索引"}},[t._v("#")]),t._v(" 添加索引")]),t._v(" "),a("p",[t._v("使用PUT请求 在uri地址后加上索引名称")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("192.168.130.124:9200/goods_index\n")])])]),a("h4",{attrs:{id:"查询索引"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查询索引"}},[t._v("#")]),t._v(" 查询索引")]),t._v(" "),a("p",[t._v("使用GET请求 在uri地址后加上索引名称")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("192.168.130.124:9200/goods_index\n")])])]),a("p",[t._v("查询多个使用逗号分隔")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("192.168.130.124:9200/goods_index,goods_index2\n")])])]),a("p",[t._v("查询全部使用_all")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("192.168.130.124:9200/_all\n")])])]),a("h4",{attrs:{id:"删除索引"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#删除索引"}},[t._v("#")]),t._v(" 删除索引")]),t._v(" "),a("p",[t._v("使用DELETE请求  在uri地址后加上索引名称")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("192.168.130.124:9200/goods_index\n")])])]),a("h4",{attrs:{id:"关闭指定索引"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#关闭指定索引"}},[t._v("#")]),t._v(" 关闭指定索引")]),t._v(" "),a("p",[t._v("关闭后只是无法使用 并不会删除此索引")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("192.168.130.124:9200/goods_index/_close\n")])])]),a("p",[t._v("打开索引")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("192.168.130.124:9200/goods_index/_open\n")])])]),a("h3",{attrs:{id:"操作映射"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#操作映射"}},[t._v("#")]),t._v(" 操作映射")]),t._v(" "),a("ul",[a("li",[t._v("简单数据类型\n"),a("ul",[a("li",[t._v("字符串\n"),a("ul",[a("li",[t._v("text 会分词,不支持聚合")]),t._v(" "),a("li",[t._v("keyword 不会分词 将全部内容作为一个词条 支持聚合")])])]),t._v(" "),a("li",[t._v("数组\n"),a("ul",[a("li",[a("img",{attrs:{src:"https://gitee.com/Iekrwh/md-images/raw/master/images/image-20211007002644122.png",alt:""}})])])]),t._v(" "),a("li",[t._v("布尔")]),t._v(" "),a("li",[t._v("二进制\n"),a("ul",[a("li",[t._v("binary")])])]),t._v(" "),a("li",[t._v("范围类型\n"),a("ul",[a("li",[t._v("integer_range")]),t._v(" "),a("li",[t._v("float_range")]),t._v(" "),a("li",[t._v("long_range")]),t._v(" "),a("li",[t._v("double_range")]),t._v(" "),a("li",[t._v("date_range")])])]),t._v(" "),a("li",[t._v("日期")])])]),t._v(" "),a("li",[t._v("复杂数据类型\n"),a("ul",[a("li",[t._v("数组:[]")]),t._v(" "),a("li",[t._v("对象:{}")])])])]),t._v(" "),a("h4",{attrs:{id:"添加映射"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#添加映射"}},[t._v("#")]),t._v(" 添加映射")]),t._v(" "),a("p",[t._v("以下操作使用Kibana操作")]),t._v(" "),a("p",[t._v("http://192.168.130.124:5601/app/dev_tools#/console")]),t._v(" "),a("div",{staticClass:"language-apl extra-class"},[a("pre",{pre:!0,attrs:{class:"language-apl"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 创建索引")]),t._v("\nPUT person\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查询索引")]),t._v("\nGET person\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 添加映射")]),t._v("\nPUT person"),a("span",{pre:!0,attrs:{class:"token monadic-operator operator"}},[t._v("/")]),t._v("_mapping\n"),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v("{")]),t._v('\n  "properties"'),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v("{")]),t._v('\n    "name"'),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v("{")]),t._v('\n      "type"'),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v(":")]),t._v('"keyword"\n    '),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v(",")]),t._v('\n    "age"'),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v("{")]),t._v('\n      "type"'),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v(":")]),t._v('"integer"\n    '),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查询映射")]),t._v("\nGET person"),a("span",{pre:!0,attrs:{class:"token monadic-operator operator"}},[t._v("/")]),t._v("_mapping\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 删除索引")]),t._v("\nDELETE person\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 创建索引并添加映射")]),t._v("\nPUT person\n"),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v("{")]),t._v('\n  "mappings"'),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v("{")]),t._v('\n    "properties"'),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v("{")]),t._v('\n        "name"'),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v("{")]),t._v('\n      "type"'),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v(":")]),t._v('"keyword"\n    '),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v(",")]),t._v('\n    "age"'),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v("{")]),t._v('\n      "type"'),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v(":")]),t._v('"integer"\n    '),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查询索引")]),t._v("\nGET person\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 添加字段")]),t._v("\nPUT person"),a("span",{pre:!0,attrs:{class:"token monadic-operator operator"}},[t._v("/")]),t._v("_mapping\n"),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v("{")]),t._v('\n  "properties"'),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v("{")]),t._v('\n    "address"'),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v("{")]),t._v('\n      "type"'),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v(":")]),t._v('"text"\n    '),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"操作文档"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#操作文档"}},[t._v("#")]),t._v(" 操作文档")]),t._v(" "),a("div",{staticClass:"language-apl extra-class"},[a("pre",{pre:!0,attrs:{class:"language-apl"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查询索引")]),t._v("\nGET person\n\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 添加文档 指定id   可以使用PUT或POST请求")]),t._v("\nPUT person"),a("span",{pre:!0,attrs:{class:"token monadic-operator operator"}},[t._v("/")]),t._v("_doc"),a("span",{pre:!0,attrs:{class:"token monadic-operator operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v("{")]),t._v('\n  "name"'),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v(":")]),t._v('"zhangsan"'),a("span",{pre:!0,attrs:{class:"token function"}},[t._v(",")]),t._v('\n  "age"'),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v(",")]),t._v('\n  "address"'),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v(":")]),t._v('"北京"\n'),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v("}")]),t._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 添加文档 不指定id  必须为POST请求")]),t._v("\nPOST person"),a("span",{pre:!0,attrs:{class:"token monadic-operator operator"}},[t._v("/")]),t._v("_doc\n"),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v("{")]),t._v('\n  "name"'),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v(":")]),t._v('"李四"'),a("span",{pre:!0,attrs:{class:"token function"}},[t._v(",")]),t._v('\n  "age"'),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v(",")]),t._v('\n  "address"'),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v(":")]),t._v('"广东"\n'),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v("}")]),t._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 根据id查询文档")]),t._v("\nGET person"),a("span",{pre:!0,attrs:{class:"token monadic-operator operator"}},[t._v("/")]),t._v("_doc"),a("span",{pre:!0,attrs:{class:"token monadic-operator operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查询所有文档")]),t._v("\nGET person"),a("span",{pre:!0,attrs:{class:"token monadic-operator operator"}},[t._v("/")]),t._v("_search\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 修改文档   必须为PUT请求  如果id存在则修改 不存在则自动创建")]),t._v("\nPUT person"),a("span",{pre:!0,attrs:{class:"token monadic-operator operator"}},[t._v("/")]),t._v("_doc"),a("span",{pre:!0,attrs:{class:"token monadic-operator operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v("{")]),t._v('\n  "name"'),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v(":")]),t._v('"wangwu"'),a("span",{pre:!0,attrs:{class:"token function"}},[t._v(",")]),t._v('\n  "age"'),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v(",")]),t._v('\n  "address"'),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v(":")]),t._v('"北京"\n'),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 根据ID删除文档")]),t._v("\nDELETE person"),a("span",{pre:!0,attrs:{class:"token monadic-operator operator"}},[t._v("/")]),t._v("_doc"),a("span",{pre:!0,attrs:{class:"token monadic-operator operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n")])])]),a("h2",{attrs:{id:"分词器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#分词器"}},[t._v("#")]),t._v(" 分词器")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://gitee.com/Iekrwh/md-images/raw/master/images/image-20211007015716324.png",alt:"image-20211007015716324"}})]),t._v(" "),a("p",[t._v("但ES原始的分词器对中文不太友好")]),t._v(" "),a("h2",{attrs:{id:"ik分词器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ik分词器"}},[t._v("#")]),t._v(" IK分词器")]),t._v(" "),a("p",[t._v("IKAnalyzer是一个开源的 基于java语言开发的轻量级的中文分词工具包")]),t._v(" "),a("p",[t._v("是一个基于Maven构建的项目  具有60万字/秒的高速处理能力 支持用户词典扩展定义")]),t._v(" "),a("p",[t._v("https://github.com/medcl/elasticsearch-analysis-ik")]),t._v(" "),a("h3",{attrs:{id:"安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[t._v("#")]),t._v(" 安装")]),t._v(" "),a("ul",[a("li",[t._v("安装JDK 由于ES内置了JDK 我们将ES内置的JDK设置为系统环境变量")])]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" /etc/profile\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("JAVA_HOME")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/opt/elasticsearch-7.15.0/jdk\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("PATH")])]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("$PATH")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${JAVA_HOME}")]),t._v("/bin\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("source")]),t._v(" /etc/profile\n")])])]),a("ul",[a("li",[t._v("安装Maven  -- 已不需要")])]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("wget")]),t._v(" https://mirrors.bfsu.edu.cn/apache/maven/maven-3/3.8.3/binaries/apache-maven-3.8.3-bin.tar.gz\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("tar")]),t._v(" -zxvf apache-maven-3.8.3-bin.tar.gz\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ln")]),t._v(" -s apache-maven-3.8.3 maven\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#配置环境变量")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" /etc/profile.d/maven.sh\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("MAVEN_HOME")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/root/maven\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("PATH")])]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${MAVEN_HOME}")]),t._v("/bin:"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${"),a("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("PATH")]),t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("source")]),t._v(" /etc/profile.d/maven.sh\nmvn -v\n")])])]),a("ul",[a("li",[t._v("安装IK分词器  --已不需要")])]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("wget")]),t._v(" https://github.com/medcl/elasticsearch-analysis-ik/archive/refs/tags/v7.15.0.zip  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#这里下载的是源码")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 由于是zip文件所以需要unzip命令")]),t._v("\nyum "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" -y "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("zip")]),t._v("\nyum "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" -y "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("unzip")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#解压")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("unzip")]),t._v(" v7.15.0.zip\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /root/elasticsearch-analysis-ik-7.15.0/\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#编译打包")]),t._v("\nmvn package\n")])])]),a("ul",[a("li",[t._v("将编译好的插件导入到ES中")])]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /opt/elasticsearch-7.15.0/plugins/\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" analysis-ik\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" analysis-ik/\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#重启es")]),t._v("\n\n")])])]),a("h3",{attrs:{id:"使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用"}},[t._v("#")]),t._v(" 使用")]),t._v(" "),a("div",{staticClass:"language-apl extra-class"},[a("pre",{pre:!0,attrs:{class:"language-apl"}},[a("code",[t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ES内置分词器")]),t._v("\nGET _analyze\n"),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v("{")]),t._v('\n  "analyzer"'),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v(":")]),t._v(' "standard"'),a("span",{pre:!0,attrs:{class:"token function"}},[t._v(",")]),t._v('\n  "text"'),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v(":")]),t._v(' "你是试试水"\n'),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ik分词器,粗粒度分词")]),t._v("\nGET _analyze\n"),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v("{")]),t._v('\n  "analyzer"'),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v(":")]),t._v(' "ik_smart"'),a("span",{pre:!0,attrs:{class:"token function"}},[t._v(",")]),t._v('\n  "text"'),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v(":")]),t._v(' "你是试试水"\n'),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ik分词器,粗粒度分词")]),t._v("\nGET _analyze\n"),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v("{")]),t._v('\n  "analyzer"'),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v(":")]),t._v(' "ik_max_word"'),a("span",{pre:!0,attrs:{class:"token function"}},[t._v(",")]),t._v('\n  "text"'),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v(":")]),t._v(' "你是试试水"\n'),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v("}")]),t._v("\n\n")])])]),a("h4",{attrs:{id:"查询文档"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查询文档"}},[t._v("#")]),t._v(" 查询文档")]),t._v(" "),a("ul",[a("li",[t._v("词条查询:tern\n"),a("ul",[a("li",[t._v("词条查询不会分析查询条件 只有当词条和查询字符串完全匹配时才匹配搜索")])])]),t._v(" "),a("li",[t._v("全文查询:match\n"),a("ul",[a("li",[t._v("全文查询会分析查询条件 先将查询条件进行分词 然后查询 求并集")])])])]),t._v(" "),a("div",{staticClass:"language-apl extra-class"},[a("pre",{pre:!0,attrs:{class:"language-apl"}},[a("code",[t._v("PUT person"),a("span",{pre:!0,attrs:{class:"token monadic-operator operator"}},[t._v("/")]),t._v("_doc"),a("span",{pre:!0,attrs:{class:"token monadic-operator operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v("{")]),t._v('\n  "name"'),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v(":")]),t._v('"李四"'),a("span",{pre:!0,attrs:{class:"token function"}},[t._v(",")]),t._v('\n  "age"'),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v(",")]),t._v('\n  "address"'),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v(":")]),t._v('"华为'),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v('G手机"\n'),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v("}")]),t._v("\n\nGET person"),a("span",{pre:!0,attrs:{class:"token monadic-operator operator"}},[t._v("/")]),t._v("_doc"),a("span",{pre:!0,attrs:{class:"token monadic-operator operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# term 词条查询 查询条件字符串和词条要完全匹配")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# es默认使用的分词器是standard 一个子一个词")]),t._v("\nGET person"),a("span",{pre:!0,attrs:{class:"token monadic-operator operator"}},[t._v("/")]),t._v("_search\n"),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v("{")]),t._v('\n  "query"'),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v("{")]),t._v('\n    "term"'),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v("{")]),t._v('\n      "address"'),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v("{")]),t._v('\n        "value"'),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v(":")]),t._v(' "手机"\n      '),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v("}")]),t._v("\n\nDELETE person\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 创建索引 添加映射 指定使用ik分词器")]),t._v("\nPUT person\n"),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v("{")]),t._v('\n  "mappings"'),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v("{")]),t._v('\n    "properties"'),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v("{")]),t._v('\n      "name"'),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v("{")]),t._v('\n        "type"'),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v(":")]),t._v(' "keyword"\n      '),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v(",")]),t._v('\n      "address"'),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v("{")]),t._v('\n        "type"'),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v(":")]),t._v(' "text"'),a("span",{pre:!0,attrs:{class:"token function"}},[t._v(",")]),t._v('\n        "analyzer"'),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v(":")]),t._v(' "ik_max_word"\n      '),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v("}")]),t._v("\n\nGET person\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 添加文档")]),t._v("\nPUT person"),a("span",{pre:!0,attrs:{class:"token monadic-operator operator"}},[t._v("/")]),t._v("_doc"),a("span",{pre:!0,attrs:{class:"token monadic-operator operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v("{")]),t._v('\n  "name"'),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v(":")]),t._v('"张三"'),a("span",{pre:!0,attrs:{class:"token function"}},[t._v(",")]),t._v('\n  "age"'),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v(",")]),t._v('\n  "address"'),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v(":")]),t._v('"华为'),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v('G手机"\n'),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v("}")]),t._v("\nPUT person"),a("span",{pre:!0,attrs:{class:"token monadic-operator operator"}},[t._v("/")]),t._v("_doc"),a("span",{pre:!0,attrs:{class:"token monadic-operator operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v("{")]),t._v('\n  "name"'),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v(":")]),t._v('"李四"'),a("span",{pre:!0,attrs:{class:"token function"}},[t._v(",")]),t._v('\n  "age"'),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v(",")]),t._v('\n  "address"'),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v(":")]),t._v('"广东"\n'),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v("}")]),t._v("\nPUT person"),a("span",{pre:!0,attrs:{class:"token monadic-operator operator"}},[t._v("/")]),t._v("_doc"),a("span",{pre:!0,attrs:{class:"token monadic-operator operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v("{")]),t._v('\n  "name"'),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v(":")]),t._v('"王五"'),a("span",{pre:!0,attrs:{class:"token function"}},[t._v(",")]),t._v('\n  "age"'),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v(",")]),t._v('\n  "address"'),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v(":")]),t._v('"小米'),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v('G手机"\n'),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v("}")]),t._v("\n\nGET person"),a("span",{pre:!0,attrs:{class:"token monadic-operator operator"}},[t._v("/")]),t._v("_search\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查询 term词条查询")]),t._v("\nGET person"),a("span",{pre:!0,attrs:{class:"token monadic-operator operator"}},[t._v("/")]),t._v("_search\n"),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v("{")]),t._v('\n  "query"'),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v("{")]),t._v('\n    "term"'),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v("{")]),t._v('\n      "address"'),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v("{")]),t._v('\n        "value"'),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v(":")]),t._v(' "手机"\n      '),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# match 先会对查询的字符串进行分词 在查询 求交集")]),t._v("\nGET person"),a("span",{pre:!0,attrs:{class:"token monadic-operator operator"}},[t._v("/")]),t._v("_search\n"),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v("{")]),t._v('\n  "query"'),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v("{")]),t._v('\n    "match"'),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v("{")]),t._v('\n      "address"'),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v(":")]),t._v(' "苹果手机"\n    '),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token dfn builtin"}},[t._v("}")]),t._v("\n\n")])])]),a("h2",{attrs:{id:"javaapi"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#javaapi"}},[t._v("#")]),t._v(" JavaApi")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("创建springboot项目 并引入ES")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://gitee.com/Iekrwh/md-images/raw/master/images/image-20211007152049832.png",alt:"image-20211007152049832"}})])]),t._v(" "),a("li",[a("p",[t._v("创建application.yml 配置文件")]),t._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("elasticsearch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("host")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 192.168.130.124\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("port")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("9200")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[t._v("创建ElasticSearchConfig配置类 加载配置文件 并返回一个es客户端对象")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("package")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("com"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("itheima"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("elasticsearchdemo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("config")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("apache"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("http"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpHost")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("elasticsearch"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("client"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RestClient")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("elasticsearch"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("client"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RestHighLevelClient")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("springframework"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("boot"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("context"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("properties"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ConfigurationProperties")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("springframework"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("context"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("annotation"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Bean")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("springframework"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("context"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("annotation"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Configuration")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Configuration")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@ConfigurationProperties")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("prefix "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"elasticsearch"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ElasticSearchConfig")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" host"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" port"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getHost")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" host"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHost")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" host"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("host "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" host"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getPort")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" port"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setPort")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" port"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("port "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" port"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RestHighLevelClient")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("client")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RestHighLevelClient")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RestClient")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("builder")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpHost")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("host"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("port"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[t._v("注入对象 使用")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//1.创建es客户端对象")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Autowired")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RestHighLevelClient")]),t._v(" restHighLevelClient"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])])]),t._v(" "),a("h3",{attrs:{id:"添加索引-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#添加索引-2"}},[t._v("#")]),t._v(" 添加索引")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//添加索引")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Test")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addIndex")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IOException")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//获取操作索引的对象")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IndicesClient")]),t._v(" indices "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" restHighLevelClient"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("indices")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//添加")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CreateIndexRequest")]),t._v(" createIndex "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CreateIndexRequest")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"itheima"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//索引名称")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CreateIndexResponse")]),t._v(" createIndexResponse "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" indices"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("createIndex"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RequestOptions")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("DEFAULT"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//根据返回值判断结果")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("createIndexResponse"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("isAcknowledged")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("ul",[a("li",[t._v("添加索引并添加映射")])]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//添加索引并添加映射")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Test")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addIndexAndMapping")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IOException")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//获取操作索引的对象")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IndicesClient")]),t._v(" indices "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" restHighLevelClient"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("indices")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CreateIndexRequest")]),t._v(" request "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CreateIndexRequest")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"twitter"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 向索引添加映射")]),t._v("\n    request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("source")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"{\\n"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"    \\"settings\\" : {\\n"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"        \\"number_of_shards\\" : 3,\\n"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"        \\"number_of_replicas\\" : 2\\n"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"    },\\n"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"    \\"mappings\\" : {\\n"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"        \\"tweet\\" : {\\n"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"            \\"properties\\" : {\\n"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"                \\"message\\" : { \\"type\\" : \\"text\\" }\\n"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"            }\\n"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"        }\\n"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"    },\\n"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"    \\"aliases\\" : {\\n"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"        \\"twitter_alias\\" : {}\\n"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"    }\\n"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"}"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("XContentType")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("JSON"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CreateIndexResponse")]),t._v(" createIndexResponse "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" indices"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RequestOptions")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("DEFAULT"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//根据返回值判断结果")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("createIndexResponse"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("isAcknowledged")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h4",{attrs:{id:"查询索引-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查询索引-2"}},[t._v("#")]),t._v(" 查询索引")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//查询索引")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Test")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("queryIndex")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IOException")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("GetIndexRequest")]),t._v(" request "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("GetIndexRequest")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"twitter"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("GetIndexResponse")]),t._v(" getIndexResponse "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" restHighLevelClient"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("indices")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RequestOptions")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("DEFAULT"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("getIndexResponse"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getAliases")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("getIndexResponse"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getMappings")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h4",{attrs:{id:"删除索引-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#删除索引-2"}},[t._v("#")]),t._v(" 删除索引")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//删除索引")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Test")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("deleteIndex")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IOException")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IndicesClient")]),t._v(" indices "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" restHighLevelClient"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("indices")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DeleteIndexRequest")]),t._v(" deleteIndexRequest "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DeleteIndexRequest")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"itheima"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AcknowledgedResponse")]),t._v(" acknowledgedResponse "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" indices"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("delete")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("deleteIndexRequest"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RequestOptions")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("DEFAULT"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("acknowledgedResponse"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("isAcknowledged")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h4",{attrs:{id:"判断索引是否存在"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#判断索引是否存在"}},[t._v("#")]),t._v(" 判断索引是否存在")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//判断索引是否存在")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Test")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("existIndex")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IOException")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IndicesClient")]),t._v(" indices "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" restHighLevelClient"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("indices")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("GetIndexRequest")]),t._v(" getRequest "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("GetIndexRequest")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"itheima"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("boolean")]),t._v(" exists "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" indices"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("exists")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("getRequest"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RequestOptions")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("DEFAULT"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("exists"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"添加-修改文档"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#添加-修改文档"}},[t._v("#")]),t._v(" 添加/修改文档")]),t._v(" "),a("p",[t._v("当id存在时则修改 不存在时则添加")]),t._v(" "),a("h4",{attrs:{id:"map"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#map"}},[t._v("#")]),t._v(" Map")]),t._v(" "),a("div",{staticClass:"language-JAVA extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//添加/修改 map")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Test")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addDoc")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IOException")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//添加数据对象 map")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Map")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" data "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HashMap")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"address"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"背景"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"name"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"钻石"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"age"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"11"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//1.获取文档对象")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IndexRequest")]),t._v(" indexRequest "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IndexRequest")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"twitter"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("id")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("source")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//添加数据")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IndexResponse")]),t._v(" index "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" restHighLevelClient"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("index")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("indexRequest"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RequestOptions")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("DEFAULT"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//打印响应结果")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("index"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h4",{attrs:{id:"json"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#json"}},[t._v("#")]),t._v(" JSON")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//添加/修改 json")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Test")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addDoc2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IOException")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//创建对象")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Person")]),t._v(" p "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Person")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    p"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    p"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"iekr"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    p"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setAge")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("15")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    p"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setAddress")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"广东"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" json "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" JSON"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("toJSONString")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("p"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//1.获取文档对象")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IndexRequest")]),t._v(" indexRequest "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IndexRequest")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"twitter"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("id")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("p"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("source")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("json"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("XContentType")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("JSON"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//添加数据")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IndexResponse")]),t._v(" index "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" restHighLevelClient"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("index")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("indexRequest"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RequestOptions")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("DEFAULT"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//打印响应结果")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("index"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"查询文档-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查询文档-2"}},[t._v("#")]),t._v(" 查询文档")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[t._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//根据id查询文档")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Test")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findDocById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IOException")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("GetRequest")]),t._v(" getRequest "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("GetRequest")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"twitter"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('//        getRequest.id("1");  //单独指定id')]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("GetResponse")]),t._v(" documentFields "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" restHighLevelClient"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("getRequest"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RequestOptions")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("DEFAULT"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("documentFields"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getSourceAsString")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//获取JSON字符串")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"删除文档"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#删除文档"}},[t._v("#")]),t._v(" 删除文档")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//根据id删除文档")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Test")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("delDoc")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IOException")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DeleteRequest")]),t._v(" delete "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DeleteRequest")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"twitter"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DeleteResponse")]),t._v(" response "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" restHighLevelClient"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("delete")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("delete"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RequestOptions")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("DEFAULT"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);