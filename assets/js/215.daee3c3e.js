(window.webpackJsonp=window.webpackJsonp||[]).push([[215],{586:function(s,t,e){"use strict";e.r(t);var a=e(46),n=Object(a.a)({},(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"集群搭建"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#集群搭建"}},[s._v("#")]),s._v(" 集群搭建")]),s._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -zxvf /opt/software/apache-zookeeper-3.5.7-bin.tar.gz -C /opt/module/\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" /opt/module/apache-zookeeper-3.5.7-bin/ /opt/module/zookeeper\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#环境变量")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/profile.d/my_env.sh \n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#追加")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#ZOOKEEPER_HOME")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ZOOKEEPER_HOME")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/opt/module/zookeeper\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PATH")])]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$PATH")]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$ZOOKEEPER_HOME")]),s._v("/bin\n\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#同步环境变量")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" /etc/profile.d/my_env.sh \n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" xsync /etc/profile.d/my_env.sh \n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#将配置文件改名称为zoo.cfg")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /opt/module/zookeeper/conf/\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" zoo_sample.cfg zoo.cfg\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#配置zookeeper文件")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" zoo.cfg \n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#追加下内容")]),s._v("\nserver.2"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("hadoop102:2888:3888\nserver.3"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("hadoop103:2888:3888\nserver.4"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("hadoop104:2888:3888\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#修改数据存储位置")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("dataDir")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/opt/module/zookeeper/zkData\n\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /opt/module/zookeeper/zkData\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" zkData\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#创建myid用于zookeeper标记机器")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#编辑为102的2用于唯一标识 103为3 104为4")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /opt/module/zookeeper/zkData/myid\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#同步")]),s._v("\nxsync /opt/module/zookeeper/\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#103")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /opt/module/zookeeper/zkData/myid\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#104")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /opt/module/zookeeper/zkData/myid\n")])])]),e("p",[s._v("启动")]),s._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#在三台机器上分别启动")]),s._v("\nzkServer.sh start\n")])])]),e("p",[s._v("zookeeper默认web端口为8080 和tomcat冲突 可以在配置文件同 admin.serverPort=8081 进行配置")]),s._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /opt/module/zookeeper/conf/zoo.cfg \n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#web端口")]),s._v("\nadmin.serverPort"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("8081")]),s._v("\n")])])])])}),[],!1,null,null,null);t.default=n.exports}}]);