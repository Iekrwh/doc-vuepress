(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{385:function(t,e,a){"use strict";a.r(e);var s=a(46),d=Object(s.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"hdfs的数据流"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hdfs的数据流"}},[t._v("#")]),t._v(" HDFS的数据流")]),t._v(" "),a("p",[a("img",{attrs:{src:"D:/code/md/imags/wps5C3B.tmp-16304864377052-16304865023123.png",alt:"wps5C3B.tmp-16304864377052-16304865023123"}})]),t._v(" "),a("p",[t._v("（1）客户端通过Distributed FileSystem模块向NameNode请求上传文件，NameNode检查目标文件是否已存在，父目录是否存在。")]),t._v(" "),a("p",[t._v("（2）NameNode返回是否可以上传。")]),t._v(" "),a("p",[t._v("（3）客户端请求第一个 Block上传到哪几个DataNode服务器上。")]),t._v(" "),a("p",[t._v("（4）NameNode返回3个DataNode节点，分别为dn1、dn2、dn3。")]),t._v(" "),a("p",[t._v("（5）客户端通过FSDataOutputStream模块请求dn1上传数据，dn1收到请求会继续调用dn2，然后dn2调用dn3，将这个通信管道建立完成。")]),t._v(" "),a("p",[t._v("（6）dn1、dn2、dn3逐级应答客户端。")]),t._v(" "),a("p",[t._v("（7）客户端开始往dn1上传第一个Block（先从磁盘读取数据放到一个本地内存缓存），以Packet为单位，dn1收到一个Packet就会传给dn2，dn2传给dn3；dn1每传一个packet会放入一个应答队列等待应答。")]),t._v(" "),a("p",[t._v("（8）当一个Block传输完成之后，客户端再次请求NameNode上传第二个Block的服务器。")]),t._v(" "),a("h2",{attrs:{id:"网络拓扑"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#网络拓扑"}},[t._v("#")]),t._v(" 网络拓扑")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://gitee.com/Iekrwh/md-images/raw/master/images/wpsE9DB.tmp-16304875223645.png",alt:"img"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://gitee.com/Iekrwh/md-images/raw/master/images/wps939E.tmp-16304876304676.png",alt:"img"}})])])}),[],!1,null,null,null);e.default=d.exports}}]);