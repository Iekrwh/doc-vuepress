(window.webpackJsonp=window.webpackJsonp||[]).push([[140],{508:function(a,s,t){"use strict";t.r(s);var e=t(46),n=Object(e.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"flume-对接-kafka"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#flume-对接-kafka"}},[a._v("#")]),a._v(" Flume 对接 Kafka")]),a._v(" "),t("p",[a._v("Flume输出到Kafka中")]),a._v(" "),t("p",[a._v("Flume配置文件")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[a._v("a2.sources "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" r2\na2.sinks "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" k2\na2.channels "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" c2\n\na2.sources.r2.type "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exec")]),a._v("\na2.sources.r2.command "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("tail")]),a._v(" -F /opt/module/flume/datas/123.log\na2.sources.r2.shell "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" /bin/bash -C\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#kafka Sink")]),a._v("\na2.sinks.k2.type "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" org.apache.flume.source.kafka.KafkaSource\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#发送topic")]),a._v("\na2.sinks.k2.kafka.topic "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" first\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#kafka地址")]),a._v("\na2.sinks.k2.kafka.bootstrap.servers "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" hadoop102:9092,hadoop103:9092,hadoop104:9092\na2.sinks.k2.kafka.flumeBatchSize "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("20")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#ack模式")]),a._v("\na2.sinks.k2.kafka.producer.acks "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" all\na2.sinks.k2.kafka.producer.linger.ms "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\n\n\n\na2.channels.c2.type "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" memory\na2.channels.c2.capacity "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1000")]),a._v("\na2.channels.c2.transactionCapacity "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("100")]),a._v("\n\n\na2.sources.r2.channels "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" c2\na2.sinks.k2.channel "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" c2\n")])])]),t("p",[a._v("启动flume")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[a._v("flume-ng agent -n a2 -c conf/ -f datas/flume-taildir-hdfs.conf -Dflume.root.logger"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("INFO,console\n")])])]),t("p",[a._v("同时flume给我们提供了 kafka source 可以从kafka指定话题中读取数据到channel中")])])}),[],!1,null,null,null);s.default=n.exports}}]);