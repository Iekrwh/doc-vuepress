<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>函数 | Chiriri</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/doc-vuepress/favicon.ico">
    <meta name="description" content="Chiriridesu">
    
    <link rel="preload" href="/doc-vuepress/assets/css/0.styles.f3cbd881.css" as="style"><link rel="preload" href="/doc-vuepress/assets/js/app.d9f058a2.js" as="script"><link rel="preload" href="/doc-vuepress/assets/js/2.3b3db5cf.js" as="script"><link rel="preload" href="/doc-vuepress/assets/js/38.95142af3.js" as="script"><link rel="prefetch" href="/doc-vuepress/assets/js/10.b164b477.js"><link rel="prefetch" href="/doc-vuepress/assets/js/100.9586193b.js"><link rel="prefetch" href="/doc-vuepress/assets/js/101.fbfb8023.js"><link rel="prefetch" href="/doc-vuepress/assets/js/102.35211624.js"><link rel="prefetch" href="/doc-vuepress/assets/js/103.a852832b.js"><link rel="prefetch" href="/doc-vuepress/assets/js/104.d3840a25.js"><link rel="prefetch" href="/doc-vuepress/assets/js/105.bb97f57b.js"><link rel="prefetch" href="/doc-vuepress/assets/js/106.f1ce2ff3.js"><link rel="prefetch" href="/doc-vuepress/assets/js/107.bcc1af18.js"><link rel="prefetch" href="/doc-vuepress/assets/js/108.aea72a13.js"><link rel="prefetch" href="/doc-vuepress/assets/js/109.ea26c2b6.js"><link rel="prefetch" href="/doc-vuepress/assets/js/11.0cc7b3fe.js"><link rel="prefetch" href="/doc-vuepress/assets/js/110.1dbc43ae.js"><link rel="prefetch" href="/doc-vuepress/assets/js/111.6c704305.js"><link rel="prefetch" href="/doc-vuepress/assets/js/112.2104312f.js"><link rel="prefetch" href="/doc-vuepress/assets/js/113.3af2e44c.js"><link rel="prefetch" href="/doc-vuepress/assets/js/114.83fa7f12.js"><link rel="prefetch" href="/doc-vuepress/assets/js/115.03b9877c.js"><link rel="prefetch" href="/doc-vuepress/assets/js/116.94139d50.js"><link rel="prefetch" href="/doc-vuepress/assets/js/117.d6922e84.js"><link rel="prefetch" href="/doc-vuepress/assets/js/118.d6600176.js"><link rel="prefetch" href="/doc-vuepress/assets/js/119.6e2fc19d.js"><link rel="prefetch" href="/doc-vuepress/assets/js/12.42e85628.js"><link rel="prefetch" href="/doc-vuepress/assets/js/120.fb904b71.js"><link rel="prefetch" href="/doc-vuepress/assets/js/121.e5418133.js"><link rel="prefetch" href="/doc-vuepress/assets/js/122.23684851.js"><link rel="prefetch" href="/doc-vuepress/assets/js/123.a2201e8f.js"><link rel="prefetch" href="/doc-vuepress/assets/js/124.5398a4db.js"><link rel="prefetch" href="/doc-vuepress/assets/js/125.acf77852.js"><link rel="prefetch" href="/doc-vuepress/assets/js/126.8cc2a7ef.js"><link rel="prefetch" href="/doc-vuepress/assets/js/127.636078e5.js"><link rel="prefetch" href="/doc-vuepress/assets/js/128.3dda16ec.js"><link rel="prefetch" href="/doc-vuepress/assets/js/129.76fb4160.js"><link rel="prefetch" href="/doc-vuepress/assets/js/13.22626cf9.js"><link rel="prefetch" href="/doc-vuepress/assets/js/130.4050b596.js"><link rel="prefetch" href="/doc-vuepress/assets/js/131.dcf83479.js"><link rel="prefetch" href="/doc-vuepress/assets/js/132.34df2699.js"><link rel="prefetch" href="/doc-vuepress/assets/js/133.0c2f2395.js"><link rel="prefetch" href="/doc-vuepress/assets/js/134.631acf38.js"><link rel="prefetch" href="/doc-vuepress/assets/js/135.3c7a8002.js"><link rel="prefetch" href="/doc-vuepress/assets/js/136.9d498fad.js"><link rel="prefetch" href="/doc-vuepress/assets/js/137.52b3491f.js"><link rel="prefetch" href="/doc-vuepress/assets/js/138.2def15df.js"><link rel="prefetch" href="/doc-vuepress/assets/js/139.2027a741.js"><link rel="prefetch" href="/doc-vuepress/assets/js/14.a0e74d71.js"><link rel="prefetch" href="/doc-vuepress/assets/js/140.14025373.js"><link rel="prefetch" href="/doc-vuepress/assets/js/141.3be2fa6f.js"><link rel="prefetch" href="/doc-vuepress/assets/js/142.7a2f26a6.js"><link rel="prefetch" href="/doc-vuepress/assets/js/143.2226636a.js"><link rel="prefetch" href="/doc-vuepress/assets/js/144.d6cb4516.js"><link rel="prefetch" href="/doc-vuepress/assets/js/145.cb3d04a4.js"><link rel="prefetch" href="/doc-vuepress/assets/js/146.c2363b65.js"><link rel="prefetch" href="/doc-vuepress/assets/js/147.2d96c979.js"><link rel="prefetch" href="/doc-vuepress/assets/js/148.1932e886.js"><link rel="prefetch" href="/doc-vuepress/assets/js/149.2bb44329.js"><link rel="prefetch" href="/doc-vuepress/assets/js/15.487511b9.js"><link rel="prefetch" href="/doc-vuepress/assets/js/150.54f16e16.js"><link rel="prefetch" href="/doc-vuepress/assets/js/151.1ccddd4a.js"><link rel="prefetch" href="/doc-vuepress/assets/js/152.c2aae540.js"><link rel="prefetch" href="/doc-vuepress/assets/js/153.818ba26e.js"><link rel="prefetch" href="/doc-vuepress/assets/js/154.4083fc73.js"><link rel="prefetch" href="/doc-vuepress/assets/js/155.fcb284df.js"><link rel="prefetch" href="/doc-vuepress/assets/js/156.2d9dd10c.js"><link rel="prefetch" href="/doc-vuepress/assets/js/157.2d97df21.js"><link rel="prefetch" href="/doc-vuepress/assets/js/158.b933259f.js"><link rel="prefetch" href="/doc-vuepress/assets/js/159.127ec2ce.js"><link rel="prefetch" href="/doc-vuepress/assets/js/16.99912d5c.js"><link rel="prefetch" href="/doc-vuepress/assets/js/160.7a9466de.js"><link rel="prefetch" href="/doc-vuepress/assets/js/161.a0965a1e.js"><link rel="prefetch" href="/doc-vuepress/assets/js/162.9ba63ff6.js"><link rel="prefetch" href="/doc-vuepress/assets/js/163.113f0d78.js"><link rel="prefetch" href="/doc-vuepress/assets/js/164.77e0c395.js"><link rel="prefetch" href="/doc-vuepress/assets/js/165.d4f26c88.js"><link rel="prefetch" href="/doc-vuepress/assets/js/166.a4a8a100.js"><link rel="prefetch" href="/doc-vuepress/assets/js/167.f1a4e055.js"><link rel="prefetch" href="/doc-vuepress/assets/js/168.28bca86c.js"><link rel="prefetch" href="/doc-vuepress/assets/js/169.b99892fc.js"><link rel="prefetch" href="/doc-vuepress/assets/js/17.31966cc8.js"><link rel="prefetch" href="/doc-vuepress/assets/js/170.0d63cca0.js"><link rel="prefetch" href="/doc-vuepress/assets/js/171.150d95f7.js"><link rel="prefetch" href="/doc-vuepress/assets/js/172.82820234.js"><link rel="prefetch" href="/doc-vuepress/assets/js/173.d8cdd9b8.js"><link rel="prefetch" href="/doc-vuepress/assets/js/174.cc3e8688.js"><link rel="prefetch" href="/doc-vuepress/assets/js/175.c85fb692.js"><link rel="prefetch" href="/doc-vuepress/assets/js/176.a9864030.js"><link rel="prefetch" href="/doc-vuepress/assets/js/177.01f901aa.js"><link rel="prefetch" href="/doc-vuepress/assets/js/178.d4d7719a.js"><link rel="prefetch" href="/doc-vuepress/assets/js/179.8e5df995.js"><link rel="prefetch" href="/doc-vuepress/assets/js/18.487740e0.js"><link rel="prefetch" href="/doc-vuepress/assets/js/180.c283ed3a.js"><link rel="prefetch" href="/doc-vuepress/assets/js/181.4d553ce8.js"><link rel="prefetch" href="/doc-vuepress/assets/js/182.5f1d0255.js"><link rel="prefetch" href="/doc-vuepress/assets/js/183.bdbabf31.js"><link rel="prefetch" href="/doc-vuepress/assets/js/184.cd3a123a.js"><link rel="prefetch" href="/doc-vuepress/assets/js/185.4f0aed34.js"><link rel="prefetch" href="/doc-vuepress/assets/js/186.1c7423c5.js"><link rel="prefetch" href="/doc-vuepress/assets/js/187.a3260f92.js"><link rel="prefetch" href="/doc-vuepress/assets/js/188.b2b395d2.js"><link rel="prefetch" href="/doc-vuepress/assets/js/189.c3e16d42.js"><link rel="prefetch" href="/doc-vuepress/assets/js/19.a5a43fa0.js"><link rel="prefetch" href="/doc-vuepress/assets/js/190.0027611b.js"><link rel="prefetch" href="/doc-vuepress/assets/js/191.5da79366.js"><link rel="prefetch" href="/doc-vuepress/assets/js/192.de572ba5.js"><link rel="prefetch" href="/doc-vuepress/assets/js/193.e7eecd76.js"><link rel="prefetch" href="/doc-vuepress/assets/js/194.c0c9a3e1.js"><link rel="prefetch" href="/doc-vuepress/assets/js/195.4c9e640a.js"><link rel="prefetch" href="/doc-vuepress/assets/js/196.bca887a2.js"><link rel="prefetch" href="/doc-vuepress/assets/js/197.32b3ef9a.js"><link rel="prefetch" href="/doc-vuepress/assets/js/198.36dd1121.js"><link rel="prefetch" href="/doc-vuepress/assets/js/199.a7a2ea66.js"><link rel="prefetch" href="/doc-vuepress/assets/js/20.f16a556e.js"><link rel="prefetch" href="/doc-vuepress/assets/js/200.541d2d45.js"><link rel="prefetch" href="/doc-vuepress/assets/js/201.2a6bc31e.js"><link rel="prefetch" href="/doc-vuepress/assets/js/202.1ab0ebf7.js"><link rel="prefetch" href="/doc-vuepress/assets/js/203.8ea83886.js"><link rel="prefetch" href="/doc-vuepress/assets/js/204.71960433.js"><link rel="prefetch" href="/doc-vuepress/assets/js/205.face6c2c.js"><link rel="prefetch" href="/doc-vuepress/assets/js/206.edb32265.js"><link rel="prefetch" href="/doc-vuepress/assets/js/207.7edd2587.js"><link rel="prefetch" href="/doc-vuepress/assets/js/208.8eb4dd8a.js"><link rel="prefetch" href="/doc-vuepress/assets/js/209.1e71f98c.js"><link rel="prefetch" href="/doc-vuepress/assets/js/21.80c27c79.js"><link rel="prefetch" href="/doc-vuepress/assets/js/210.d0362700.js"><link rel="prefetch" href="/doc-vuepress/assets/js/211.ad68c64c.js"><link rel="prefetch" href="/doc-vuepress/assets/js/212.8b718048.js"><link rel="prefetch" href="/doc-vuepress/assets/js/213.4ba985f2.js"><link rel="prefetch" href="/doc-vuepress/assets/js/214.07f64a1f.js"><link rel="prefetch" href="/doc-vuepress/assets/js/215.daee3c3e.js"><link rel="prefetch" href="/doc-vuepress/assets/js/216.32992c2f.js"><link rel="prefetch" href="/doc-vuepress/assets/js/217.7529cd64.js"><link rel="prefetch" href="/doc-vuepress/assets/js/218.0ca3a67d.js"><link rel="prefetch" href="/doc-vuepress/assets/js/219.e61a2c40.js"><link rel="prefetch" href="/doc-vuepress/assets/js/22.c30ea85f.js"><link rel="prefetch" href="/doc-vuepress/assets/js/220.251d745a.js"><link rel="prefetch" href="/doc-vuepress/assets/js/221.1d95ee5c.js"><link rel="prefetch" href="/doc-vuepress/assets/js/222.4a52a281.js"><link rel="prefetch" href="/doc-vuepress/assets/js/223.5647c4eb.js"><link rel="prefetch" href="/doc-vuepress/assets/js/224.e27da076.js"><link rel="prefetch" href="/doc-vuepress/assets/js/225.896a2b7e.js"><link rel="prefetch" href="/doc-vuepress/assets/js/226.9269748b.js"><link rel="prefetch" href="/doc-vuepress/assets/js/227.f7fc3384.js"><link rel="prefetch" href="/doc-vuepress/assets/js/228.3c17af77.js"><link rel="prefetch" href="/doc-vuepress/assets/js/23.b160b248.js"><link rel="prefetch" href="/doc-vuepress/assets/js/24.52ffcd3c.js"><link rel="prefetch" href="/doc-vuepress/assets/js/25.0038c555.js"><link rel="prefetch" href="/doc-vuepress/assets/js/26.c1d32d66.js"><link rel="prefetch" href="/doc-vuepress/assets/js/27.361aa74e.js"><link rel="prefetch" href="/doc-vuepress/assets/js/28.301d1f1b.js"><link rel="prefetch" href="/doc-vuepress/assets/js/29.db696a70.js"><link rel="prefetch" href="/doc-vuepress/assets/js/3.618cc386.js"><link rel="prefetch" href="/doc-vuepress/assets/js/30.82c215a1.js"><link rel="prefetch" href="/doc-vuepress/assets/js/31.4218ee88.js"><link rel="prefetch" href="/doc-vuepress/assets/js/32.185a0605.js"><link rel="prefetch" href="/doc-vuepress/assets/js/33.8e56a2c2.js"><link rel="prefetch" href="/doc-vuepress/assets/js/34.e93b30c8.js"><link rel="prefetch" href="/doc-vuepress/assets/js/35.c029905f.js"><link rel="prefetch" href="/doc-vuepress/assets/js/36.3c26314a.js"><link rel="prefetch" href="/doc-vuepress/assets/js/37.281e9bbf.js"><link rel="prefetch" href="/doc-vuepress/assets/js/39.7b46210b.js"><link rel="prefetch" href="/doc-vuepress/assets/js/4.ab196059.js"><link rel="prefetch" href="/doc-vuepress/assets/js/40.da793450.js"><link rel="prefetch" href="/doc-vuepress/assets/js/41.ae5d114c.js"><link rel="prefetch" href="/doc-vuepress/assets/js/42.6092d6fd.js"><link rel="prefetch" href="/doc-vuepress/assets/js/43.3676ecec.js"><link rel="prefetch" href="/doc-vuepress/assets/js/44.604dee90.js"><link rel="prefetch" href="/doc-vuepress/assets/js/45.ef7b2563.js"><link rel="prefetch" href="/doc-vuepress/assets/js/46.5126b263.js"><link rel="prefetch" href="/doc-vuepress/assets/js/47.15c9fa2f.js"><link rel="prefetch" href="/doc-vuepress/assets/js/48.4d000b30.js"><link rel="prefetch" href="/doc-vuepress/assets/js/49.c04122ec.js"><link rel="prefetch" href="/doc-vuepress/assets/js/5.61dedc87.js"><link rel="prefetch" href="/doc-vuepress/assets/js/50.b36b2268.js"><link rel="prefetch" href="/doc-vuepress/assets/js/51.38b2e042.js"><link rel="prefetch" href="/doc-vuepress/assets/js/52.fa2688bf.js"><link rel="prefetch" href="/doc-vuepress/assets/js/53.8e7b4e2a.js"><link rel="prefetch" href="/doc-vuepress/assets/js/54.cc60f637.js"><link rel="prefetch" href="/doc-vuepress/assets/js/55.c593a0bd.js"><link rel="prefetch" href="/doc-vuepress/assets/js/56.b92ff64e.js"><link rel="prefetch" href="/doc-vuepress/assets/js/57.0127b901.js"><link rel="prefetch" href="/doc-vuepress/assets/js/58.b51e39e7.js"><link rel="prefetch" href="/doc-vuepress/assets/js/59.4656872e.js"><link rel="prefetch" href="/doc-vuepress/assets/js/6.7862f44a.js"><link rel="prefetch" href="/doc-vuepress/assets/js/60.0b84f136.js"><link rel="prefetch" href="/doc-vuepress/assets/js/61.77bb1c42.js"><link rel="prefetch" href="/doc-vuepress/assets/js/62.255b2396.js"><link rel="prefetch" href="/doc-vuepress/assets/js/63.0784c59f.js"><link rel="prefetch" href="/doc-vuepress/assets/js/64.bfd10989.js"><link rel="prefetch" href="/doc-vuepress/assets/js/65.271e0fe0.js"><link rel="prefetch" href="/doc-vuepress/assets/js/66.37d35e9b.js"><link rel="prefetch" href="/doc-vuepress/assets/js/67.1f723e6e.js"><link rel="prefetch" href="/doc-vuepress/assets/js/68.1d6b4d62.js"><link rel="prefetch" href="/doc-vuepress/assets/js/69.751866f7.js"><link rel="prefetch" href="/doc-vuepress/assets/js/7.16153ad4.js"><link rel="prefetch" href="/doc-vuepress/assets/js/70.5a176ed9.js"><link rel="prefetch" href="/doc-vuepress/assets/js/71.cefafd88.js"><link rel="prefetch" href="/doc-vuepress/assets/js/72.89cf0ee7.js"><link rel="prefetch" href="/doc-vuepress/assets/js/73.7ae1caa5.js"><link rel="prefetch" href="/doc-vuepress/assets/js/74.3a0426c5.js"><link rel="prefetch" href="/doc-vuepress/assets/js/75.346a5b12.js"><link rel="prefetch" href="/doc-vuepress/assets/js/76.40d6b949.js"><link rel="prefetch" href="/doc-vuepress/assets/js/77.af42e53e.js"><link rel="prefetch" href="/doc-vuepress/assets/js/78.a1a1041d.js"><link rel="prefetch" href="/doc-vuepress/assets/js/79.3979b3e2.js"><link rel="prefetch" href="/doc-vuepress/assets/js/8.51f8b48e.js"><link rel="prefetch" href="/doc-vuepress/assets/js/80.ddedd06c.js"><link rel="prefetch" href="/doc-vuepress/assets/js/81.f47899f4.js"><link rel="prefetch" href="/doc-vuepress/assets/js/82.b64b79c5.js"><link rel="prefetch" href="/doc-vuepress/assets/js/83.3d3b0dd8.js"><link rel="prefetch" href="/doc-vuepress/assets/js/84.f20ba61e.js"><link rel="prefetch" href="/doc-vuepress/assets/js/85.3a85fe1a.js"><link rel="prefetch" href="/doc-vuepress/assets/js/86.a2c68016.js"><link rel="prefetch" href="/doc-vuepress/assets/js/87.e498e9cf.js"><link rel="prefetch" href="/doc-vuepress/assets/js/88.16da169b.js"><link rel="prefetch" href="/doc-vuepress/assets/js/89.dfdd9486.js"><link rel="prefetch" href="/doc-vuepress/assets/js/9.b89c29c6.js"><link rel="prefetch" href="/doc-vuepress/assets/js/90.9dfc4480.js"><link rel="prefetch" href="/doc-vuepress/assets/js/91.29fae888.js"><link rel="prefetch" href="/doc-vuepress/assets/js/92.3a2f5266.js"><link rel="prefetch" href="/doc-vuepress/assets/js/93.2a30db4b.js"><link rel="prefetch" href="/doc-vuepress/assets/js/94.d73d493b.js"><link rel="prefetch" href="/doc-vuepress/assets/js/95.4675d725.js"><link rel="prefetch" href="/doc-vuepress/assets/js/96.ba849b11.js"><link rel="prefetch" href="/doc-vuepress/assets/js/97.167b1f35.js"><link rel="prefetch" href="/doc-vuepress/assets/js/98.cd43851a.js"><link rel="prefetch" href="/doc-vuepress/assets/js/99.6b57d9c5.js">
    <link rel="stylesheet" href="/doc-vuepress/assets/css/0.styles.f3cbd881.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/doc-vuepress/" class="home-link router-link-active"><!----> <span class="site-name">Chiriri</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/doc-vuepress/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><span class="title">后端</span> <span class="arrow down"></span></button> <button type="button" aria-label="后端" class="mobile-dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/doc-vuepress/JavaSE/" class="nav-link">
  JavaSE
</a></li><li class="dropdown-item"><!----> <a href="/doc-vuepress/JavaEE/" class="nav-link">
  JavaEE
</a></li><li class="dropdown-item"><!----> <a href="/doc-vuepress/Linux/" class="nav-link">
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/doc-vuepress/SQL/" class="nav-link">
  SQL
</a></li><li class="dropdown-item"><!----> <a href="/doc-vuepress/机器学习/" class="nav-link">
  机器学习
</a></li><li class="dropdown-item"><!----> <a href="/doc-vuepress/Python模块/" class="nav-link">
  Python模块
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="大数据" class="dropdown-title"><span class="title">大数据</span> <span class="arrow down"></span></button> <button type="button" aria-label="大数据" class="mobile-dropdown-title"><span class="title">大数据</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/doc-vuepress/Hadoop/" class="nav-link">
  Hadoop
</a></li><li class="dropdown-item"><!----> <a href="/doc-vuepress/Zookeeper/" class="nav-link">
  Zookeeper
</a></li><li class="dropdown-item"><!----> <a href="/doc-vuepress/Hive/" class="nav-link router-link-active">
  Hive
</a></li><li class="dropdown-item"><!----> <a href="/doc-vuepress/Flume/" class="nav-link">
  Flume
</a></li><li class="dropdown-item"><!----> <a href="/doc-vuepress/Kafka/" class="nav-link">
  Kafka
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/doc-vuepress/前端/" class="nav-link">
  前端
</a></li><li class="dropdown-item"><!----> <a href="/doc-vuepress/Vue/" class="nav-link">
  Vue
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/doc-vuepress/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><span class="title">后端</span> <span class="arrow down"></span></button> <button type="button" aria-label="后端" class="mobile-dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/doc-vuepress/JavaSE/" class="nav-link">
  JavaSE
</a></li><li class="dropdown-item"><!----> <a href="/doc-vuepress/JavaEE/" class="nav-link">
  JavaEE
</a></li><li class="dropdown-item"><!----> <a href="/doc-vuepress/Linux/" class="nav-link">
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/doc-vuepress/SQL/" class="nav-link">
  SQL
</a></li><li class="dropdown-item"><!----> <a href="/doc-vuepress/机器学习/" class="nav-link">
  机器学习
</a></li><li class="dropdown-item"><!----> <a href="/doc-vuepress/Python模块/" class="nav-link">
  Python模块
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="大数据" class="dropdown-title"><span class="title">大数据</span> <span class="arrow down"></span></button> <button type="button" aria-label="大数据" class="mobile-dropdown-title"><span class="title">大数据</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/doc-vuepress/Hadoop/" class="nav-link">
  Hadoop
</a></li><li class="dropdown-item"><!----> <a href="/doc-vuepress/Zookeeper/" class="nav-link">
  Zookeeper
</a></li><li class="dropdown-item"><!----> <a href="/doc-vuepress/Hive/" class="nav-link router-link-active">
  Hive
</a></li><li class="dropdown-item"><!----> <a href="/doc-vuepress/Flume/" class="nav-link">
  Flume
</a></li><li class="dropdown-item"><!----> <a href="/doc-vuepress/Kafka/" class="nav-link">
  Kafka
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/doc-vuepress/前端/" class="nav-link">
  前端
</a></li><li class="dropdown-item"><!----> <a href="/doc-vuepress/Vue/" class="nav-link">
  Vue
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/doc-vuepress/Hive/介绍.html" class="sidebar-link">介绍</a></li><li><a href="/doc-vuepress/Hive/环境.html" class="sidebar-link">环境</a></li><li><a href="/doc-vuepress/Hive/DBeaver.html" class="sidebar-link">DBeaver</a></li><li><a href="/doc-vuepress/Hive/Hive 类型.html" class="sidebar-link">Hive 类型</a></li><li><a href="/doc-vuepress/Hive/DDL数据定义.html" class="sidebar-link">DDL数据定义</a></li><li><a href="/doc-vuepress/Hive/DML.html" class="sidebar-link">DML</a></li><li><a href="/doc-vuepress/Hive/查询.html" class="sidebar-link">查询</a></li><li><a href="/doc-vuepress/Hive/函数.html" class="active sidebar-link">函数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/doc-vuepress/Hive/函数.html#系统内置函数" class="sidebar-link">系统内置函数</a></li><li class="sidebar-sub-header"><a href="/doc-vuepress/Hive/函数.html#空字段赋值" class="sidebar-link">空字段赋值</a></li><li class="sidebar-sub-header"><a href="/doc-vuepress/Hive/函数.html#case-when" class="sidebar-link">CASE WHEN</a></li><li class="sidebar-sub-header"><a href="/doc-vuepress/Hive/函数.html#行转列" class="sidebar-link">行转列</a></li><li class="sidebar-sub-header"><a href="/doc-vuepress/Hive/函数.html#列转行" class="sidebar-link">列转行</a></li><li class="sidebar-sub-header"><a href="/doc-vuepress/Hive/函数.html#窗口函数-开窗函数" class="sidebar-link">窗口函数(开窗函数)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/doc-vuepress/Hive/函数.html#窗口函数聚合" class="sidebar-link">窗口函数聚合</a></li><li class="sidebar-sub-header"><a href="/doc-vuepress/Hive/函数.html#其他函数" class="sidebar-link">其他函数</a></li></ul></li><li class="sidebar-sub-header"><a href="/doc-vuepress/Hive/函数.html#rank" class="sidebar-link">Rank</a></li><li class="sidebar-sub-header"><a href="/doc-vuepress/Hive/函数.html#日期函数" class="sidebar-link">日期函数</a></li></ul></li><li><a href="/doc-vuepress/Hive/自定义函数.html" class="sidebar-link">自定义函数</a></li><li><a href="/doc-vuepress/Hive/压缩和存储.html" class="sidebar-link">压缩和存储</a></li><li><a href="/doc-vuepress/Hive/企业优化.html" class="sidebar-link">企业优化</a></li><li><a href="/doc-vuepress/Hive/Hive实战.html" class="sidebar-link">Hive实战</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="函数"><a href="#函数" class="header-anchor">#</a> 函数</h1> <h2 id="系统内置函数"><a href="#系统内置函数" class="header-anchor">#</a> 系统内置函数</h2> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">show</span> functions<span class="token punctuation">;</span>  <span class="token comment">-- 查看系统自带的函数</span>
<span class="token keyword">show</span> functions <span class="token operator">like</span> <span class="token string">&quot;*date*&quot;</span><span class="token punctuation">;</span> <span class="token comment">-- 模糊查询函数名</span>
<span class="token keyword">desc</span> <span class="token keyword">function</span> upper<span class="token punctuation">;</span> <span class="token comment">-- 显示自带的函数的用法</span>
<span class="token keyword">desc</span> <span class="token keyword">function</span> <span class="token keyword">extended</span> upper<span class="token punctuation">;</span> <span class="token comment">-- 详细显示自带的函数的用法</span>
</code></pre></div><h2 id="空字段赋值"><a href="#空字段赋值" class="header-anchor">#</a> 空字段赋值</h2> <p>NVL( value，default_value)  如果value为null 则替换为 default_value</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> comm<span class="token punctuation">,</span>nvl<span class="token punctuation">(</span>comm<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>  <span class="token comment">-- 替换为指定值</span>
<span class="token keyword">select</span> comm<span class="token punctuation">,</span> nvl<span class="token punctuation">(</span>comm<span class="token punctuation">,</span>mgr<span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span> <span class="token comment">-- 如果值为列名 则替换为当前行列的值</span>
</code></pre></div><h2 id="case-when"><a href="#case-when" class="header-anchor">#</a> CASE WHEN</h2> <p>类似于switch</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> 
  dept_id<span class="token punctuation">,</span>
  <span class="token function">sum</span><span class="token punctuation">(</span><span class="token keyword">case</span> sex <span class="token keyword">when</span> <span class="token string">'男'</span> <span class="token keyword">then</span> <span class="token number">1</span> <span class="token keyword">else</span> <span class="token number">0</span> <span class="token keyword">end</span><span class="token punctuation">)</span> male_count<span class="token punctuation">,</span>
  <span class="token function">sum</span><span class="token punctuation">(</span><span class="token keyword">case</span> sex <span class="token keyword">when</span> <span class="token string">'女'</span> <span class="token keyword">then</span> <span class="token number">1</span> <span class="token keyword">else</span> <span class="token number">0</span> <span class="token keyword">end</span><span class="token punctuation">)</span> female_count
<span class="token keyword">from</span> 
  emp_sex
<span class="token keyword">group</span> <span class="token keyword">by</span>
  dept_id<span class="token punctuation">;</span>
<span class="token comment">-- 根据 dept_id 分组 条件判断值 再累加列个数</span>
</code></pre></div><h2 id="行转列"><a href="#行转列" class="header-anchor">#</a> 行转列</h2> <p>将多个值 / 列的值 聚合为一个值</p> <p><img src="https://gitee.com/Iekrwh/md-images/raw/master/images/image-20211101222449121.png" alt="image-20211101222449121"></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span>
    t1<span class="token punctuation">.</span>base<span class="token punctuation">,</span>
    concat_ws<span class="token punctuation">(</span><span class="token string">'|'</span><span class="token punctuation">,</span> collect_set<span class="token punctuation">(</span>t1<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span> name
<span class="token keyword">from</span>
    <span class="token punctuation">(</span><span class="token keyword">select</span>
        name<span class="token punctuation">,</span>
        concat<span class="token punctuation">(</span>constellation<span class="token punctuation">,</span> <span class="token string">&quot;,&quot;</span><span class="token punctuation">,</span> blood_type<span class="token punctuation">)</span> base
    <span class="token keyword">from</span>
        person_info<span class="token punctuation">)</span> t1
<span class="token keyword">group</span> <span class="token keyword">by</span>
    t1<span class="token punctuation">.</span>base<span class="token punctuation">;</span>
</code></pre></div><ul><li>CONCAT(string A/col, string B/col…)：返回输入字符串连接后的结果，支持任意个输入字符串;</li> <li>CONCAT_WS(separator, str1, str2,...)： 它是一个特殊形式的 CONCAT()。第一个参数剩余参数间的分隔符。 将array或者string 以分隔符分割 返回 string</li> <li>COLLECT_SET(col)：函数只接受基本数据类型，它的主要作用是将某字段的值进行去重汇总，产生array类型字段。</li> <li>COLLECT_LIST(col)：产生array类型字段, 包含重复元素 .</li></ul> <h2 id="列转行"><a href="#列转行" class="header-anchor">#</a> 列转行</h2> <ul><li><p>EXPLODE(col)：将hive一列中复杂的array拆分一列多行 map结构拆分成两列多行 k v。</p></li> <li><p>split(str,regex):  将指定字符串以 指定的分割 进行拆分 返回数组</p></li> <li><p>LATERAL VIEW:  虚拟表  在此基础上可以对拆分后的数据进行聚合。</p></li></ul> <p><img src="https://gitee.com/Iekrwh/md-images/raw/master/images/image-20211101223800332.png" alt="image-20211101223800332"></p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">vi</span> movie.txt

《疑犯追踪》	悬疑,动作,科幻,剧情
《Lie to me》	悬疑,警匪,动作,心理,剧情
《战狼2》	战争,动作,灾难
</code></pre></div><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> movie_info<span class="token punctuation">(</span>
    movie string<span class="token punctuation">,</span> 
    category string<span class="token punctuation">)</span> 
<span class="token keyword">row</span> format delimited <span class="token keyword">fields</span> <span class="token keyword">terminated</span> <span class="token keyword">by</span> <span class="token string">&quot;\t&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">load</span> <span class="token keyword">data</span> <span class="token keyword">local</span> inpath <span class="token string">&quot;/opt/module/datas/movie.txt&quot;</span> <span class="token keyword">into</span> <span class="token keyword">table</span> movie_info<span class="token punctuation">;</span>
</code></pre></div><p>转换</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span>
    m<span class="token punctuation">.</span>movie<span class="token punctuation">,</span>
    tbl<span class="token punctuation">.</span>cate
<span class="token keyword">from</span>
    movie_info m
lateral <span class="token keyword">view</span>
    explode<span class="token punctuation">(</span>split<span class="token punctuation">(</span>category<span class="token punctuation">,</span> <span class="token string">&quot;,&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> tbl <span class="token keyword">as</span> cate<span class="token punctuation">;</span>
</code></pre></div><p>现在根据电影名来进行分组聚合 请实现使用类分组 查看每个类别下的电影名</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span>
    cate<span class="token punctuation">,</span>
    collect_list<span class="token punctuation">(</span>movie<span class="token punctuation">)</span>
<span class="token keyword">from</span>
    <span class="token punctuation">(</span><span class="token keyword">select</span>
    m<span class="token punctuation">.</span>movie<span class="token punctuation">,</span>
    tbl<span class="token punctuation">,</span>cate
<span class="token keyword">from</span>
    movie_info m
lateral <span class="token keyword">view</span>
    explode<span class="token punctuation">(</span>split<span class="token punctuation">(</span>category<span class="token punctuation">,</span> <span class="token string">&quot;,&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> tbl <span class="token keyword">as</span> cate<span class="token punctuation">;</span><span class="token punctuation">)</span> t1
<span class="token keyword">group</span> <span class="token keyword">by</span> 
    cate<span class="token punctuation">;</span>

<span class="token comment">#两sql语句一致</span>
<span class="token keyword">select</span>
    tbl<span class="token punctuation">.</span>cate<span class="token punctuation">,</span>
    collect_list<span class="token punctuation">(</span>m<span class="token punctuation">.</span>movie<span class="token punctuation">)</span>
<span class="token keyword">from</span>
    movie_info m
lateral <span class="token keyword">view</span>
    explode<span class="token punctuation">(</span>split<span class="token punctuation">(</span>category<span class="token punctuation">,</span> <span class="token string">&quot;,&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> tbl <span class="token keyword">as</span> cate
<span class="token keyword">group</span> <span class="token keyword">by</span> 
    cate<span class="token punctuation">;</span>
</code></pre></div><h2 id="窗口函数-开窗函数"><a href="#窗口函数-开窗函数" class="header-anchor">#</a> 窗口函数(开窗函数)</h2> <p>数据准备：name，orderdate，cost</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">vim</span> /opt/module/datas/business.txt
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>jack,2017-01-01,10
tony,2017-01-02,15
jack,2017-02-03,23
tony,2017-01-04,29
jack,2017-01-05,46
jack,2017-04-06,42
tony,2017-01-07,50
jack,2017-01-08,55
mart,2017-04-08,62
mart,2017-04-09,68
neil,2017-05-10,12
mart,2017-04-11,75
neil,2017-06-12,80
mart,2017-04-13,94
</code></pre></div><p>创建表</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> business<span class="token punctuation">(</span>
name string<span class="token punctuation">,</span> 
orderdate string<span class="token punctuation">,</span>
cost <span class="token keyword">int</span>
<span class="token punctuation">)</span> <span class="token keyword">ROW</span> FORMAT DELIMITED <span class="token keyword">FIELDS</span> <span class="token keyword">TERMINATED</span> <span class="token keyword">BY</span> <span class="token string">','</span><span class="token punctuation">;</span>

<span class="token keyword">load</span> <span class="token keyword">data</span> <span class="token keyword">local</span> inpath <span class="token string">&quot;/opt/module/datas/business.txt&quot;</span> <span class="token keyword">into</span> <span class="token keyword">table</span> business<span class="token punctuation">;</span>
</code></pre></div><h3 id="窗口函数聚合"><a href="#窗口函数聚合" class="header-anchor">#</a> 窗口函数聚合</h3> <p>查询在2017年4月份购买过的顾客及总人数</p> <p>统计所有2017-04的时间 根据用户名去重 count()默认是一列 而我们的name是多列 如果直接拼接则会报错,我们通过窗口函数 over()进行回写</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> 
    <span class="token keyword">distinct</span> name<span class="token punctuation">,</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token keyword">distinct</span> name<span class="token punctuation">)</span> <span class="token keyword">over</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">-- distinct去重</span>
<span class="token keyword">from</span> business
<span class="token keyword">where</span>
    substring<span class="token punctuation">(</span>orderdate<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token string">&quot;2017-04&quot;</span><span class="token punctuation">;</span>
</code></pre></div><p>查询顾客的购买明细及月购买总额</p> <p>使用窗口函数 根据时间列 分区 统计每区的sum  进行回写到对应的分区 每一个单元格中</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> name<span class="token punctuation">,</span>orderdate<span class="token punctuation">,</span>cost<span class="token punctuation">,</span><span class="token function">sum</span><span class="token punctuation">(</span>cost<span class="token punctuation">)</span> <span class="token keyword">over</span><span class="token punctuation">(</span><span class="token keyword">partition</span> <span class="token keyword">by</span> <span class="token keyword">month</span><span class="token punctuation">(</span>orderdate<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">from</span> business<span class="token punctuation">;</span>
</code></pre></div><p>上述的场景, 将每个顾客的cost按照日期进行累加</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> name<span class="token punctuation">,</span>orderdate<span class="token punctuation">,</span>cost<span class="token punctuation">,</span> 
<span class="token function">sum</span><span class="token punctuation">(</span>cost<span class="token punctuation">)</span> <span class="token keyword">over</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> sample1<span class="token punctuation">,</span><span class="token comment">-- 所有行相加 </span>
<span class="token function">sum</span><span class="token punctuation">(</span>cost<span class="token punctuation">)</span> <span class="token keyword">over</span><span class="token punctuation">(</span><span class="token keyword">partition</span> <span class="token keyword">by</span> name<span class="token punctuation">)</span> <span class="token keyword">as</span> sample2<span class="token punctuation">,</span><span class="token comment">-- 按name分组，组内数据累加 </span>
<span class="token function">sum</span><span class="token punctuation">(</span>cost<span class="token punctuation">)</span> <span class="token keyword">over</span><span class="token punctuation">(</span><span class="token keyword">partition</span> <span class="token keyword">by</span> name <span class="token keyword">order</span> <span class="token keyword">by</span> orderdate<span class="token punctuation">)</span> <span class="token keyword">as</span> sample3<span class="token punctuation">,</span><span class="token comment">-- 按name分组，组内数据累加 </span>
<span class="token function">sum</span><span class="token punctuation">(</span>cost<span class="token punctuation">)</span> <span class="token keyword">over</span><span class="token punctuation">(</span><span class="token keyword">partition</span> <span class="token keyword">by</span> name <span class="token keyword">order</span> <span class="token keyword">by</span> orderdate <span class="token keyword">rows</span> <span class="token operator">between</span> <span class="token keyword">UNBOUNDED</span> <span class="token keyword">PRECEDING</span> <span class="token operator">and</span> <span class="token keyword">current</span> <span class="token keyword">row</span> <span class="token punctuation">)</span> <span class="token keyword">as</span> sample4 <span class="token punctuation">,</span><span class="token comment">-- 和sample3一样,由起点到当前行的聚合 </span>
<span class="token function">sum</span><span class="token punctuation">(</span>cost<span class="token punctuation">)</span> <span class="token keyword">over</span><span class="token punctuation">(</span><span class="token keyword">partition</span> <span class="token keyword">by</span> name <span class="token keyword">order</span> <span class="token keyword">by</span> orderdate <span class="token keyword">rows</span> <span class="token operator">between</span> <span class="token number">1</span> <span class="token keyword">PRECEDING</span> <span class="token operator">and</span> <span class="token keyword">current</span> <span class="token keyword">row</span><span class="token punctuation">)</span> <span class="token keyword">as</span> sample5<span class="token punctuation">,</span> <span class="token comment">-- 当前行和前面一行做聚合 </span>
<span class="token function">sum</span><span class="token punctuation">(</span>cost<span class="token punctuation">)</span> <span class="token keyword">over</span><span class="token punctuation">(</span><span class="token keyword">partition</span> <span class="token keyword">by</span> name <span class="token keyword">order</span> <span class="token keyword">by</span> orderdate <span class="token keyword">rows</span> <span class="token operator">between</span> <span class="token number">1</span> <span class="token keyword">PRECEDING</span> <span class="token operator">AND</span> <span class="token number">1</span> <span class="token keyword">FOLLOWING</span> <span class="token punctuation">)</span> <span class="token keyword">as</span> sample6<span class="token punctuation">,</span><span class="token comment">-- 当前行和前边一行及后面一行 </span>
<span class="token function">sum</span><span class="token punctuation">(</span>cost<span class="token punctuation">)</span> <span class="token keyword">over</span><span class="token punctuation">(</span><span class="token keyword">partition</span> <span class="token keyword">by</span> name <span class="token keyword">order</span> <span class="token keyword">by</span> orderdate <span class="token keyword">rows</span> <span class="token operator">between</span> <span class="token keyword">current</span> <span class="token keyword">row</span> <span class="token operator">and</span> <span class="token keyword">UNBOUNDED</span> <span class="token keyword">FOLLOWING</span> <span class="token punctuation">)</span> <span class="token keyword">as</span> sample7 <span class="token comment">-- 当前行及后面所有行 </span>
<span class="token keyword">from</span> business<span class="token punctuation">;</span>

<span class="token comment">#将上述操作整合到一个窗口函数中</span>
<span class="token keyword">select</span> name<span class="token punctuation">,</span>orderdate<span class="token punctuation">,</span>cost<span class="token punctuation">,</span>
<span class="token function">sum</span><span class="token punctuation">(</span>cost<span class="token punctuation">)</span> <span class="token keyword">over</span><span class="token punctuation">(</span><span class="token keyword">partition</span> <span class="token keyword">by</span> <span class="token keyword">month</span><span class="token punctuation">(</span>orderdate<span class="token punctuation">)</span><span class="token punctuation">)</span> mc<span class="token punctuation">,</span>
<span class="token function">sum</span><span class="token punctuation">(</span>cost<span class="token punctuation">)</span> <span class="token keyword">over</span><span class="token punctuation">(</span><span class="token keyword">partition</span> <span class="token keyword">by</span> name <span class="token keyword">order</span> <span class="token keyword">by</span> orderdate <span class="token keyword">asc</span> <span class="token keyword">rows</span> <span class="token operator">between</span> <span class="token keyword">unbounded</span> <span class="token keyword">PRECEDING</span> <span class="token operator">and</span> <span class="token keyword">current</span> <span class="token keyword">row</span><span class="token punctuation">)</span> lc<span class="token punctuation">,</span> <span class="token comment">-- 每人购买金额的累加</span>
<span class="token function">sum</span><span class="token punctuation">(</span>cost<span class="token punctuation">)</span> <span class="token keyword">over</span><span class="token punctuation">(</span><span class="token keyword">partition</span> <span class="token keyword">by</span> name<span class="token punctuation">,</span>substring<span class="token punctuation">(</span>orderdate<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">-- 每人每月的购买金额 </span>
<span class="token keyword">from</span> business<span class="token punctuation">;</span>
</code></pre></div><p>OVER()：指定分析函数工作的数据窗口大小，这个数据窗口大小可能会随着行的变而变化。</p> <ul><li>CURRENT ROW 当前行</li> <li>n PRECEDING 往前N行数据</li> <li>n FOLLOWING 往后N行数据</li> <li>UNBOUNDED 起点，UNBOUNDED PRECEDING 表示从前面的起点， UNBOUNDED FOLLOWING表示到后面的终点</li> <li>rows必须跟在Order by 子句之后，对排序的结果进行限制，使用固定的行数来限制分区中的数据行数量</li></ul> <h3 id="其他函数"><a href="#其他函数" class="header-anchor">#</a> 其他函数</h3> <ul><li><p>LAG(col,n,default_val)：往前第n行数据</p> <ul><li><p>col 列名</p></li> <li><p>n 显示当前行的前几行</p></li> <li><p>default_val 如果前几行中没有数据则以此值为默认值</p></li> <li><p>查看顾客上次的购买时间</p></li> <li><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> name<span class="token punctuation">,</span>orderdate<span class="token punctuation">,</span>cost<span class="token punctuation">,</span>
lag<span class="token punctuation">(</span>orderdate<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'1970-01-01'</span><span class="token punctuation">)</span> <span class="token keyword">over</span><span class="token punctuation">(</span><span class="token keyword">partition</span> <span class="token keyword">by</span> name <span class="token keyword">order</span> <span class="token keyword">by</span> orderdate <span class="token punctuation">)</span> <span class="token keyword">as</span> time1<span class="token punctuation">,</span>
lag<span class="token punctuation">(</span>orderdate<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">over</span> <span class="token punctuation">(</span><span class="token keyword">partition</span> <span class="token keyword">by</span> name <span class="token keyword">order</span> <span class="token keyword">by</span> orderdate<span class="token punctuation">)</span> <span class="token keyword">as</span> time2
<span class="token keyword">from</span> business<span class="token punctuation">;</span>
</code></pre></div></li></ul></li> <li><p>LEAD(col,n, default_val)：往后第n行数据</p> <ul><li>col 列名</li> <li>n 显示当前行的后几行</li> <li>default_val 如果前几行中没有数据则以此值为默认值</li></ul></li> <li><p>NTILE(n)：把有序窗口的行分发到指定数据的组中，各个组有编号，编号从1开始，对于每一行，NTILE返回此行所属的组的编号。注意：n必须为int类型。</p> <ul><li><p>查询前20%时间的订单信息</p></li> <li><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token punctuation">(</span>
    <span class="token keyword">select</span> name<span class="token punctuation">,</span>orderdate<span class="token punctuation">,</span>cost<span class="token punctuation">,</span> 
    ntile<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token keyword">over</span><span class="token punctuation">(</span><span class="token keyword">order</span> <span class="token keyword">by</span> orderdate<span class="token punctuation">)</span> sorted <span class="token comment">-- 将结果分成5组数据 </span>
    <span class="token keyword">from</span> business
<span class="token punctuation">)</span> t
<span class="token keyword">where</span> sorted <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>  <span class="token comment">-- 因为平均分为5组了 所有第一组为前百分之20</span>
</code></pre></div></li></ul></li> <li><p>PERCENT_RANK()  求出当前行在结果集中位置的百分百  为double类型 每次计算后面都会有误差</p> <ul><li><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> name<span class="token punctuation">,</span>orderdate<span class="token punctuation">,</span>cost<span class="token punctuation">,</span> 
PERCENT_RANK<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">over</span><span class="token punctuation">(</span><span class="token keyword">order</span> <span class="token keyword">by</span> orderdate<span class="token punctuation">)</span> pr <span class="token comment">-- 返回一个0.00-1.00 的值 为当前行所在结果集中占据位置的百分比</span>
<span class="token keyword">from</span> business
</code></pre></div></li></ul></li></ul> <h2 id="rank"><a href="#rank" class="header-anchor">#</a> Rank</h2> <p>原始数据</p> <table><thead><tr><th>name</th> <th>subject</th> <th>score</th></tr></thead> <tbody><tr><td>孙悟空</td> <td>语文</td> <td>87</td></tr> <tr><td>孙悟空</td> <td>数学</td> <td>95</td></tr> <tr><td>孙悟空</td> <td>英语</td> <td>68</td></tr> <tr><td>大海</td> <td>语文</td> <td>94</td></tr> <tr><td>大海</td> <td>数学</td> <td>56</td></tr> <tr><td>大海</td> <td>英语</td> <td>84</td></tr> <tr><td>宋宋</td> <td>语文</td> <td>64</td></tr> <tr><td>宋宋</td> <td>数学</td> <td>86</td></tr> <tr><td>宋宋</td> <td>英语</td> <td>84</td></tr> <tr><td>婷婷</td> <td>语文</td> <td>65</td></tr> <tr><td>婷婷</td> <td>数学</td> <td>85</td></tr> <tr><td>婷婷</td> <td>英语</td> <td>78</td></tr></tbody></table> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> score<span class="token punctuation">(</span>
name string<span class="token punctuation">,</span>
subject string<span class="token punctuation">,</span> 
score <span class="token keyword">int</span><span class="token punctuation">)</span> 
<span class="token keyword">row</span> format delimited <span class="token keyword">fields</span> <span class="token keyword">terminated</span> <span class="token keyword">by</span> <span class="token string">&quot;\t&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">load</span> <span class="token keyword">data</span> <span class="token keyword">local</span> inpath <span class="token string">'/opt/module/datas/score.txt'</span> <span class="token keyword">into</span> <span class="token keyword">table</span> score<span class="token punctuation">;</span>
</code></pre></div><p>计算每门学科成绩排名</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
    <span class="token operator">*</span><span class="token punctuation">,</span>
    RANK<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">by</span> subject <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> score <span class="token keyword">desc</span><span class="token punctuation">)</span> r<span class="token punctuation">,</span>
    DENSE_RANK<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">by</span> subject <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> score <span class="token keyword">desc</span><span class="token punctuation">)</span> dr<span class="token punctuation">,</span>
    ROW_NUMBER<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">by</span> subject <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> score <span class="token keyword">desc</span><span class="token punctuation">)</span> rn
<span class="token keyword">FROM</span>
    score<span class="token punctuation">;</span>
</code></pre></div><ul><li>RANK() 排序相同时会重复，总数不会变</li> <li>DENSE_RANK() 排序相同时会重复，总数会减少</li> <li>ROW_NUMBER() 会根据顺序计算</li></ul> <p><img src="https://gitee.com/Iekrwh/md-images/raw/master/images/image-20211109155211625.png" alt="image-20211109155211625"></p> <h2 id="日期函数"><a href="#日期函数" class="header-anchor">#</a> 日期函数</h2> <ul><li><p>current_date返回当前日期</p> <ul><li><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token keyword">current_date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul></li> <li><p>date_add 日期的加</p> <ul><li><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 今天开始90天以后的日期</span>
<span class="token keyword">select</span> date_add<span class="token punctuation">(</span><span class="token keyword">current_date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul></li> <li><p>date_sub 日期的减</p> <ul><li><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 今天开始90天以前的日期</span>
<span class="token keyword">select</span> date_sub<span class="token punctuation">(</span><span class="token keyword">current_date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul></li> <li><p>两个日期之间的日期差</p> <ul><li><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 今天和1990年6月4日的天数差</span>
<span class="token keyword">SELECT</span> datediff<span class="token punctuation">(</span><span class="token keyword">CURRENT_DATE</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;1990-06-04&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 返回的为天数</span>
</code></pre></div></li></ul></li> <li><p>判断哪个顾客连续两天光顾过</p> <ul><li><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
	name<span class="token punctuation">,</span>
	<span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> c
<span class="token keyword">from</span>
	<span class="token punctuation">(</span>
	<span class="token keyword">SELECT</span>
		<span class="token operator">*</span><span class="token punctuation">,</span>
		date_sub<span class="token punctuation">(</span>orderdate<span class="token punctuation">,</span>
		rn<span class="token punctuation">)</span> <span class="token keyword">temp</span>
		<span class="token comment">-- 原始时间减去当前name区时间对应的序号 </span>
	<span class="token keyword">from</span>
		<span class="token punctuation">(</span>
		<span class="token keyword">SELECT</span>
			<span class="token operator">*</span><span class="token punctuation">,</span>
			ROW_NUMBER<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">over</span><span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">by</span> name
		<span class="token keyword">ORDER</span> <span class="token keyword">by</span>
			orderdate<span class="token punctuation">)</span> <span class="token keyword">as</span> rn
		<span class="token keyword">FROM</span>
			business 
<span class="token punctuation">)</span> t1<span class="token punctuation">)</span>t2
<span class="token keyword">group</span> <span class="token keyword">by</span>
	name<span class="token punctuation">,</span>
	<span class="token keyword">temp</span>
<span class="token keyword">HAVING</span>
	c <span class="token operator">&gt;=</span> <span class="token number">2</span>
<span class="token punctuation">;</span>
</code></pre></div></li></ul></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/doc-vuepress/Hive/查询.html" class="prev">
        查询
      </a></span> <span class="next"><a href="/doc-vuepress/Hive/自定义函数.html">
        自定义函数
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/doc-vuepress/assets/js/app.d9f058a2.js" defer></script><script src="/doc-vuepress/assets/js/2.3b3db5cf.js" defer></script><script src="/doc-vuepress/assets/js/38.95142af3.js" defer></script>
  </body>
</html>
